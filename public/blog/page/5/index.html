
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>Headspring Labs</title>
	<meta name="author" content="Headspring Labs">

	
	<meta name="description" content="Looking for a warmer place to live and the best city to raise a family, Angel Rivera touched down in Austin in 2010 with his wife. The couple grew &hellip;">
	
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="/atom.xml" rel="alternate" title="Headspring Labs" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script async="true" src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	
</head>


<body>
	<header id="header" class="inner"><h1><a href="/">Headspring Labs</a></h1>
<nav id="mobile-nav">
	<div class="alignleft menu">
		<a class="button">Menu</a>
		<div class="container"><ul class="main">
	<li><a href="/">Blog</a></li>
	<li><a href="/blog/archives">Archives</a></li>
	<li><a href="/open-source">Open Source</a></li>
	<li><a href="/team">The Team</a></li>
	<li><a href="/about-us">About Us</a></li>
</ul>
</div>
	</div>
	<div class="alignright search">
		<a class="button"></a>
		<div class="container">
			<form action="http://google.com/search" method="get">
				<input type="text" name="q" results="0">
				<input type="hidden" name="q" value="site:headspringlabs.com">
			</form>
		</div>
	</div>
</nav>
<nav id="sub-nav" class="alignright">
	<div class="social">
		
		
		
		<a class="twitter" href="http://twitter.com/HeadspringLabs" title="Twitter">Twitter</a>
		
		
		<a class="github" href="https://github.com/HeadspringLabs" title="GitHub">GitHub</a>
		
	    
		
		<a class="coderwall" href="https://coderwall.com/team/headspring" title="Coderwall">Coderwall</a>
		
		
		
		
		
		<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
	    
	</div>
	<form class="search" action="http://google.com/search" method="get">
		<input class="alignright" type="text" name="q" results="0">
		<input type="hidden" name="q" value="site:headspringlabs.com">
	</form>
</nav>
<nav id="main-nav"><ul class="main">
	<li><a href="/">Blog</a></li>
	<li><a href="/blog/archives">Archives</a></li>
	<li><a href="/open-source">Open Source</a></li>
	<li><a href="/team">The Team</a></li>
	<li><a href="/about-us">About Us</a></li>
</ul>
</nav>

</header>
	
		
	
	<div id="content" class="inner">


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/meet-headspring-angel-rivera/">
		
			Meet Headspring: Angel Rivera</a>
	</h2>
	<div class="entry-content">
		<p>Looking for a warmer place to live and the best city to raise a family, Angel Rivera touched down in Austin in 2010 with his wife. The couple grew their family with a son in 2011, and he is very proud. “My son takes my breath away. There’s no getting used to it, and there are new adventures every day. It gives me a whole new way of looking at life.” Angel joined our Headspring team in January, and we’re happy to have him!</p>
<p style="text-align: center;"><img class="size-medium wp-image-6483 aligncenter" alt="" src="http://www.headspring.com/wp-content/uploads/2013/03/Angel1-200x300.jpg" width="200" height="300" /></p>
<p><b>What did you do before coming to Headspring?</b></p>
<p>I was born and raised in Puerto Rico where I went to college and graduated with a B.A. in graphic design.  I moved to Ohio when I was 21 years old. From there, I spent several years in Iowa, Kansas and Minnesota before I moved here for the long haul.</p>
<p><b>What do you love most about Austin?</b></p>
<p>The culture: laid-back, diverse, and relaxed. You can find everything from high-class restaurants to ones with a pet-friendly patio. There’s a little bit of everything for everyone.</p>
<p><b>What attracted you to Headspring?</b></p>
<p>I was attracted to the opportunity to work with a close-knit team, to the company culture, and to the opportunity to jump into the ever-changing software industry. I’m thankful for the opportunity!</p>
<p><b>How do you gauge “time well spent?&#8221;</b></p>
<p>When I’m being productive.</p>
<p><b>Who is your role model?</b></p>
<p>I would have to say my parents.  They were both very young when I was born. With no education, it must have been incredibly hard for them to raise both my sister and me, but they pulled it off.</p>
<p><b>What is your role at Headspring?</b></p>
<p>I’m a Business Development Consultant. I look for companies that would benefit from our services and who we can establish a strong business relationship with. A win-win.</p>
<p><b>What do you hope to accomplish professionally and personally in the next 5 years?</b></p>
<p>In the 11 years since Headspring was created, we have grown tremendously. I want to make sure Headspring continues to grow and expand so that every company out there knows how awesome we are.</p>
<p>Personally, I want to buy my mom a house in Puerto Rico. She is renting a small one-bedroom apartment right now and I think it’s time she has her own place again.</p>
<p><b>What do you enjoy doing in your free time?</b></p>
<p>I love watching movies and TV shows. The last movie I saw at the theater was Cabin in the Woods. I also enjoy playing video games (if I can find the time), playing my guitar, spending time with my family, going to the park and trying new restaurants. We’re foodies, and I especially love Thai food.</p>
<p><b>What’s your favorite Puerto Rican dish?</b></p>
<p>Rice, beans and chicken with fried plantains. There’s only one Puerto Rican restaurant – Chagos Restaurant – here. Their food is good but frankly, I cook better than they do, so I’m never homesick for Puerto Rican food!</p>
<p><b>What’s a tool you can’t live without?</b></p>
<p>Google Navigator, because I have a horrible sense of direction! I went to Puerto Rico during the Christmas holiday, and I got lost constantly because Google Maps doesn’t work there!</p>
<p><b>Any social media links?</b></p>
<p>Tweet me at <a href="http://twitter.com/angelrivera_pr" target="_blank">@angelrivera_pr</a>.</p>
<p>&nbsp;</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2013-03-15T00:00:00-05:00" pubdate data-updated="true">Mar 15<span>th</span>, 2013</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/blog/'>Blog</a>, <a class='category' href='/blog/categories/get-to-know-a-headspringer/'>Get To Know a Headspringer</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/creating-windows-installers-with-the-wix-toolset-summary/">
		
			Creating Windows Installers With the WiX Toolset - Summary</a>
	</h2>
	<div class="entry-content">
		<address>This article is part of a series exploring how to create installers for Windows software.  Here&#8217;s the complete contents of the series.</address>
<address><a href="http://www.headspring.com/nolan/creating-windows-installers-with-the-wix-toolset-part-01/">Part 1 – What Kinds of Software Projects Benefit From an Installer?</a><br />
<a href="http://www.headspring.com/nolan/creating-windows-installers-with-the-wix-toolset-part-02/">Part 2 – An Overview Of Windows Installer and its Features</a><br />
<a href="http://www.headspring.com/nolan/creating-windows-installers-with-the-wix-toolset-part-03/">Part 3 – Tooling Options for Building Installers</a><br />
<a href="http://www.headspring.com/nolan/creating-windows-installers-with-the-wix-toolset-part-04/">Part 4 – The Windows Installer Runtime Sequence</a><br />
<a href="http://www.headspring.com/nolan/creating-windows-installers-with-the-wix-toolset-part-5/">Part 5 – The Contents of an MSI</a><br />
<a href="http://www.headspring.com/nolan/creating-windows-installers-with-the-wix-toolset-part-6/">Part 6 – The Structure of a WiX File</a><br />
<a href="http://www.headspring.com/nolan/creating-windows-installers-with-the-wix-toolset-part-7/">Part 7 – Generating an MSI Package From Your WiX</a><br />
<a href="http://www.headspring.com/nolan/creating-windows-installers-with-the-wix-toolset-part-8/">Part 8 – Troubleshooting Installer Runtime Problems</a><br />
<a href="http://www.headspring.com/nolan/creating-windows-installers-with-the-wix-toolset-summary/">Part 9 - Summary</a><br />
</address>
<p><br/></p>
<h2>Summing It All Up</h2>
<p>We&#8217;ve covered a lot of ground over this series. We&#8217;ve talked about what kind of projects benefit from having an installer and why you should consider making one. We&#8217;ve learned what Windows Installer actually is (a feature of the Windows operating system) and what some of the tooling options for creating installers are. We&#8217;ve explored the sequence of events that occur when installing a package as well as the contents of an actual MSI package. We&#8217;ve dived into the basic structure of a WiX file and how an understanding of the Windows Installer concepts makes authoring WiX files easier. Coming full circle, we&#8217;ve created an installer package from WiX source with the WiX tooling.</p>
<p>There&#8217;s certainly a lot left we could discuss: automatic file harvesting, custom actions, etc. However I haven&#8217;t had much feedback on the series up to this point: Windows Installer is a niche topic in software development, especially with the rise of the web. I&#8217;m thinking about moving on to other topics.</p>
<h2>Last Call&#8230;</h2>
<p>Is there something you want to know that I haven&#8217;t covered yet? This is the time to leave feedback in the comments if you want to see more articles in this series. Thanks for reading with me!</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2013-03-15T00:00:00-05:00" pubdate data-updated="true">Mar 15<span>th</span>, 2013</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/blog/'>Blog</a>, <a class='category' href='/blog/categories/developer-deep-dive/'>Developer Deep Dive</a>, <a class='category' href='/blog/categories/wix/'>WiX</a>, <a class='category' href='/blog/categories/windows-installer/'>windows installer</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/creating-windows-installers-with-the-wix-toolset-part-8/">
		
			Creating Windows Installers With the WiX Toolset Part 8</a>
	</h2>
	<div class="entry-content">
		<address>This article is part of a series exploring how to create installers for Windows software.  Here&#8217;s the complete contents of the series.</address>
<address><a href="http://www.headspring.com/nolan/creating-windows-installers-with-the-wix-toolset-part-01/">Part 1 – What Kinds of Software Projects Benefit From an Installer?</a><br />
<a href="http://www.headspring.com/nolan/creating-windows-installers-with-the-wix-toolset-part-02/">Part 2 – An Overview Of Windows Installer and its Features</a><br />
<a href="http://www.headspring.com/nolan/creating-windows-installers-with-the-wix-toolset-part-03/">Part 3 – Tooling Options for Building Installers</a><br />
<a href="http://www.headspring.com/nolan/creating-windows-installers-with-the-wix-toolset-part-04/">Part 4 – The Windows Installer Runtime Sequence</a><br />
<a href="http://www.headspring.com/nolan/creating-windows-installers-with-the-wix-toolset-part-5/">Part 5 – The Contents of an MSI</a><br />
<a href="http://www.headspring.com/nolan/creating-windows-installers-with-the-wix-toolset-part-6/">Part 6 – The Structure of a WiX File</a><br />
<a href="http://www.headspring.com/nolan/creating-windows-installers-with-the-wix-toolset-part-7/">Part 7 – Generating an MSI Package From Your WiX</a><br />
<a href="http://www.headspring.com/nolan/creating-windows-installers-with-the-wix-toolset-part-8/">Part 8 – Troubleshooting Installer Runtime Problems</a><br />
<a href="http://www.headspring.com/nolan/creating-windows-installers-with-the-wix-toolset-summary/">Part 9 - Summary</a><br />
</address>
<p><br/><span style="font-size: 13px;">This entry describes how to enable diagnostic logging when running an installer and some tools for analyzing the output.</span></p>
<h2>Troubleshooting Runtime Problems - When All Else Fails, Print</h2>
<p>Let’s face it: things don’t always work the way they’re supposed to and installers are no different. If you’re making anything more complex than the simple Hello World example we’ve been using in this series, you’re going to run into situation where something doesn’t work quite right and you can’t figure out why.</p>
<p>Probably the world’s oldest debugging technique that predates debuggers themselves is printing a line of output with the current program location and variable values at runtime.  Windows installer doesn’t provide a native way to do this in the UI itself, but we do have the next best thing: log files.</p>
<h2>Enabling Logging During an Installation</h2>
<pre>Use msiexec (builts into Windows) to run your msi in a diagnostic mode and get a log file. Here’s an example invocation that asks for verbose logging into a file called HelloWorld.log: &#160;%windir%\system32\msiexec.exe /i artifacts\installer\HelloWorld.msi /l*v HelloWorld.log</pre>
<p>The content of the log for our simple Hello World is 749 lines. I’m obviously not going to paste it in here, but I will briefly describe some of the contents you’ll see in a log file.</p>
<ul>
<li>Machine environment settings, such as whether the computer can have patches applied or not</li>
<li>The value of properties (variables), such as the install directory</li>
<li>The beginning and end of the execute stage</li>
<li>The value of all properties at the end of the installation</li>
</ul>
<p>Most importantly, any errors that occurred should be contained here as well. You can simply search through the log for “error”.</p>
<h2>Tools for Analyzing a Log File</h2>
<p>I have not gotten a large amount of use from the tool I’m about to introduce, but I want to make you aware of it because it might be valuable to you.</p>
<p>The Windows SDK includes a utility reader for installer logs located at %PROGRAMFILES%\Microsoft SDKs\Windows\v7.1\Bin (or something similar). The utility is named WiLogUtl.exe. When you start the log analyzer, you’ll need to browse to your log file and open it. I’ve already done that step in the screenshot below.</p>
<p><a href="http://www.headspring.com/wp-content/uploads/2013/03/logAnalyzer.png"><img class="alignnone size-full wp-image-6466" alt="logAnalyzer" src="http://www.headspring.com/wp-content/uploads/2013/03/logAnalyzer.png" width="638" height="335" /></a></p>
<p>When you click Analyze, you’re taken to another screen.</p>
<p><a href="http://www.headspring.com/wp-content/uploads/2013/03/analysis.png"><img class="alignnone size-full wp-image-6467" alt="analysis" src="http://www.headspring.com/wp-content/uploads/2013/03/analysis.png" width="669" height="545" /></a></p>
<p>The most prominent UI element at the top is an errors list. Our log doesn’t have any, but this view makes it easy to see them all in one place.<br />
We also have a variety of options on the right. States will show you the detected status of the features in your package – whether they are already installed or not. Properties will give you a list of all the properties (variables) and their values in your installer.</p>
<p>The HTML Log is rather nice because it will color code all the log entries by category, and provide controls for navigating between any errors.</p>
<p><a href="http://www.headspring.com/wp-content/uploads/2013/03/htmlLogFile.png"><img class="alignnone size-large wp-image-6468" alt="htmlLogFile" src="http://www.headspring.com/wp-content/uploads/2013/03/htmlLogFile-970x709.png" width="970" height="709" /></a></p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2013-03-15T00:00:00-05:00" pubdate data-updated="true">Mar 15<span>th</span>, 2013</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/blog/'>Blog</a>, <a class='category' href='/blog/categories/developer-deep-dive/'>Developer Deep Dive</a>, <a class='category' href='/blog/categories/wix/'>WiX</a>, <a class='category' href='/blog/categories/windows-installer/'>windows installer</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/creating-windows-installers-with-the-wix-toolset-part-7/">
		
			Creating Windows Installers With the WiX Toolset Part 7</a>
	</h2>
	<div class="entry-content">
		<address>This article is part of a series exploring how to create installers for Windows software.  Here&#8217;s the complete contents of the series.</address>
<address><a href="http://www.headspring.com/nolan/creating-windows-installers-with-the-wix-toolset-part-01/">Part 1 – What Kinds of Software Projects Benefit From an Installer?</a><br />
<a href="http://www.headspring.com/nolan/creating-windows-installers-with-the-wix-toolset-part-02/">Part 2 – An Overview Of Windows Installer and its Features</a><br />
<a href="http://www.headspring.com/nolan/creating-windows-installers-with-the-wix-toolset-part-03/">Part 3 – Tooling Options for Building Installers</a><br />
<a href="http://www.headspring.com/nolan/creating-windows-installers-with-the-wix-toolset-part-04/">Part 4 – The Windows Installer Runtime Sequence</a><br />
<a href="http://www.headspring.com/nolan/creating-windows-installers-with-the-wix-toolset-part-5/">Part 5 – The Contents of an MSI</a><br />
<a href="http://www.headspring.com/nolan/creating-windows-installers-with-the-wix-toolset-part-6/">Part 6 – The Structure of a WiX File</a><br />
<a href="http://www.headspring.com/nolan/creating-windows-installers-with-the-wix-toolset-part-7/">Part 7 – Generating an MSI Package From Your WiX</a><br />
<a href="http://www.headspring.com/nolan/creating-windows-installers-with-the-wix-toolset-part-8/">Part 8 – Troubleshooting Installer Runtime Problems</a><br />
<a href="http://www.headspring.com/nolan/creating-windows-installers-with-the-wix-toolset-summary/">Part 9 - Summary</a><br />
</address>
<p><br/><br />
This post explains how to create an MSI installer from the WiX files you’ve written from either the command line or within Visual Studio.</p>
<h2>The Missing Magic</h2>
<p>So we’ve discussed how an MSI is an installer package that Windows can process and taken a peek at what the insides of an MSI looks like, and then we’ve examined a simple WiX file that can be used to create an MSI and how WiX schema is heavily tied to the entities of Windows Installer.  But we don’t quite have the complete picture yet – how do we magically get our MSI once we’ve authored some WiX?</p>
<h2><a href="http://www.headspring.com/wp-content/uploads/2013/03/magicHappensHere.png"><img class="alignnone size-full wp-image-6459" alt="magicHappensHere" src="http://www.headspring.com/wp-content/uploads/2013/03/magicHappensHere.png" width="800" height="233" /><br />
</a>It&#8217;s Just A Compiler</h2>
<p>So the answer is 42.  <a href="http://en.wikipedia.org/wiki/Answer_to_The_Ultimate_Question_of_Life,_the_Universe,_and_Everything#Answer_to_the_Ultimate_Question_of_Life.2C_the_Universe.2C_and_Everything_.2842.29">Just kidding.</a>  The answer is that the WiX toolset comes with its own compiler and linker tools.  If you’ve ever set up an automated build, this is the WiX equivalent of MsBuild.exe (or if you’re really hard core, csc.exe).  Most of the tooling in WiX is related to candles in some fashion (WiX sounds like “wicks”, the burning portion of a candle), so you might find it amusing to learn the name of the compiler is “candle”, and the linker is called “light”.</p>
<p><a href="http://www.headspring.com/wp-content/uploads/2013/03/candleAndLight.png"><img class="alignnone size-full wp-image-6460" alt="candleAndLight" src="http://www.headspring.com/wp-content/uploads/2013/03/candleAndLight.png" width="499" height="299" /></a></p>
<p>There are two ways you can run the compiler:  through the command line, or as an integrated extension of Visual Studio.  I’ll discuss both below.</p>
<h2>From the Command Line</h2>
<p>This is my preferred method.  Usually when I’m building an installer, I’ve had to do some PowerShell scripting to stage the output that I want to be packaged up by the installer.  This is usually artifacts like help files, shortcut icons, and so forth.  This is also the primary method for getting an installer compilation rolled into your automated build (you might be able to use Votive with TFS, you’ll have to verify that with someone that willingly uses TFS).</p>
<p>Invocation looks something like this in a simple bat file:</p>
<pre>rem If we don&#39;t specify an output directory, the wixobj files will get dumped in the current working directory of the bat file</pre>
<pre>tools\wix\candle.exe src\installer\HelloWorld.wxs -out artifacts\wix\</pre>
<pre>tools\wix\light.exe artifacts\wix\HelloWorld.wixobj -out artifacts\wix\HelloWorld.msi</pre>
<pre></pre>
<pre>rem Move the final output for exposure to CI build or shared network folder</pre>
<pre>copy artifacts\wix\HelloWorld.msi artifacts\installer</pre>
<h2> Inside Visual Studio</h2>
<p>The WiX tooling comes with a Visual Studio extension called Votive.  I mentioned it earlier how you can use it to get IntelliSense when editing your WiX files.  Votive also makes it possible to compile your WiX when doing a build in Visual Studio.</p>
<p>If you examine the properties of your WiX project, you’ll find a host of options for controlling your compilation.</p>
<p>The Installer tab lets you name your output file, and choose alternate output types if you happen to need something besides MSI (if you don’t know otherwise, then stick with MSI).</p>
<p><a href="http://www.headspring.com/wp-content/uploads/2013/03/buildTab.png"><img class="alignnone size-large wp-image-6461" alt="buildTab" src="http://www.headspring.com/wp-content/uploads/2013/03/buildTab-970x335.png" width="970" height="335" /></a></p>
<p>&nbsp;</p>
<p>The Build tab allows you to specify values for your preprocessor variables (WiX supports preprocessing similar to C and C++ compilers), and where to place your output.</p>
<p><a href="http://www.headspring.com/wp-content/uploads/2013/03/buildTab1.png"><img class="alignnone size-full wp-image-6462" alt="buildTab" src="http://www.headspring.com/wp-content/uploads/2013/03/buildTab1.png" width="673" height="642" /></a></p>
<p>&nbsp;</p>
<p>The Tool Settings tab can be used to ignore ICE validation on your package (although I’d suggest leaving it on, you always want to know about potential problems), and pass additional arguments to the compiler and linker.</p>
<p><a href="http://www.headspring.com/wp-content/uploads/2013/03/toolSettings.png"><img class="alignnone size-full wp-image-6463" alt="toolSettings" src="http://www.headspring.com/wp-content/uploads/2013/03/toolSettings.png" width="655" height="521" /></a></p>
<p>&nbsp;</p>
<p>When you compile the project in Visual Studio, if you look carefully at the build output you’ll see that it’s simply invoking candle and light for you under the hood:</p>
<p><a href="http://www.headspring.com/wp-content/uploads/2013/03/votiveOutput.png"><img class="alignnone size-large wp-image-6464" alt="votiveOutput" src="http://www.headspring.com/wp-content/uploads/2013/03/votiveOutput-970x158.png" width="970" height="158" /></a></p>
<p>&nbsp;</p>
<p>If you do use Votive, you probably won’t want to build the installer in debug configuration.  Otherwise you’ll have to wait for an installer to build every time you recompile the solution.</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2013-03-15T00:00:00-05:00" pubdate data-updated="true">Mar 15<span>th</span>, 2013</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/blog/'>Blog</a>, <a class='category' href='/blog/categories/developer-deep-dive/'>Developer Deep Dive</a>, <a class='category' href='/blog/categories/wix/'>WiX</a>, <a class='category' href='/blog/categories/windows-installer/'>windows installer</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/strongly-typed-whiteboarding/">
		
			Strongly Typed Whiteboarding</a>
	</h2>
	<div class="entry-content">
		<p>Last week, I announced the start of a <a href="http://www.headspring.com/patrick/insufficiently-round-wheels/">new open source project, a test framework named Fixie</a>.  This week, we&#8217;ll see how to mitigate technical risks during the early days of such a project.  In short, you do the hard work first.</p>
<p>When starting a new project, it&#8217;s easy to spend all of your time thinking about what success looks like: the awesome features you have in mind, all working together in perfect harmony, with code so clean there&#8217;s just no room for bugs.  However, there are all kinds of reasons a project could fail, and these reasons include the possibility of a technical obstacle turning the project into a nonstarter.  Early on, you&#8217;ve got to put on your Pessimist Hat and think,</p>
<blockquote><p>&#8220;What is the biggest technical challenge that, if unsolved, would make the rest of the effort worthless?&#8221;</p></blockquote>
<h2>Identify the Deal Breaker</h2>
<p>The 10,000 foot view of my plans for Fixie include the following features:</p>
<ol>
<li>Low-ceremony test fixture class discovery by default.</li>
<li>Low-ceremony test case discovery by default.</li>
<li>Simple test fixture lifecycle by default.</li>
<li>A console runner you could invoke from a build script.</li>
<li>Integration with TestDriven.NET.</li>
<li>Slick customization of the defaults: fixture discovery, case discovery, and fixture lifecycle.</li>
</ol>
<p>The first two are easy: I basically accomplished that when I <a href="http://www.headspring.com/patrick/low-ceremony-xunit/">customized xUnit</a> a while back.  I&#8217;m similarly not concerned about making a simple fixture lifecycle either, since I&#8217;ve used enough reflection to be comfortable instantiating a given Type, invoking methods on that Type, and the like.  The console runner will be a relatively small wrapper around that foundation.  Slick customization is a big, fancy feature I&#8217;d love to get to, <em>but utter failure there isn&#8217;t a deal breaker</em>.  I&#8217;d still want to use this on my own projects even if I could only leverage the simple defaults.</p>
<p>The deal breaker here is actually integration with TestDriven.NET.  Sometimes I use the ReSharper runner because it does a better job of running tests under the debugger, but GUI runners are usually overkill.  I use TD.NET because it&#8217;s simple, fast, and just fits my daily routine better.  I wouldn&#8217;t want to use Fixie on my other projects if it meant having to give up on TD.NET.  Fortunately, I found that it can work with third-party test frameworks.</p>
<h2>Create a Proof of Concept</h2>
<p>I decided that I needed to see a successful proof of concept for integration with TD.NET, before working on anything else.  It didn&#8217;t need to actually run any tests.  It just needed to prove that I could reach my own code in a meaningful way via TD.NET&#8217;s keyboard shortcuts.  Success means hitting TD.NET&#8217;s shortcut in Visual Studio, reaching my own code as a result, and then witnessing the expected output written by TD.NET.</p>
<p>I made a throw-away Solution for this proof of concept.  I didn&#8217;t know what I was doing, I was sure I&#8217;d make a bit of a mess along the way, and I didn&#8217;t want to feel any irrational pressure to keep that kind of code around as a starting point for the real thing.  I wrote one to throw away, and the key here is <em>knowing</em> this was the one to throw away.</p>
<blockquote><p>It was better than a whiteboard sketch, in that I got real feedback from the IDE at every step, but it was weaker than regular development.  All the planning and whiteboard diagrams in the world would have been irrelevant as soon as fingers met keyboard, so I dove into the implementation with the intent to learn from the activity and to discard the code afterwards.</p></blockquote>
<p>The throw-away Solution contained two projects.  The first project represented the fake implementation of my test framework&#8217;s TD.NET plugin.  The second project represented the test cases within a hypothetical consumer project.  The goal here was not to make a working plugin, but instead to prove to myself that the TD.NET integration would be technically feasable.  I wanted to discover how TD.NET behaved as I implemented that integration from scratch.</p>
<p>First, I left the fake plugin project <em>empty</em> and populated the sample consumer with a single fake test fixture:</p>
<p><div><script src='https://gist.github.com/5149250.js'></script>
<noscript><pre><code></code></pre></noscript></div>
</p>
<p>Before doing anything in the plugin project, I wanted to confirm the behavior of TD.NET in the case that NO test framework is in play at all.  Right-clicking on the MyTestCase method and running it showed the following output:</p>
<p><div><script src='https://gist.github.com/5149257.js'></script>
<noscript><pre><code></code></pre></noscript></div>
</p>
<p>Oh, right.  TD.NET has a convenient feature that it can run methods even if they are not officially recognized as test methods in a test fixture.  That can be useful to quickly try out a simple method during development, before you really have tests in place for it.  This behavior poses an interesting problem, though: <strong>how will I <em>know</em> when my proof of concept is actually being detected and used by TD.NET as a real test framework plugin?</strong></p>
<p>There are <strong>two</strong> aspects to ensuring that my proof of concept is actually playing nicely with TD.NET:</p>
<ul>
<li>When I have no test framework in play yet and I attempt to right-click the MyTestFixture class to run ALL of it, TD.NET thankfully complains: &#8220;The target type doesn&#8217;t contain tests from a known test framework or a &#8216;Main&#8217; method.&#8221;  Once I&#8217;m successful, I shouldn&#8217;t get this message anymore.</li>
<li>My initial implementation of the plugin will simply throw an exception of its <em>own</em>, surfacing in TD.NET&#8217;s output, in contrast to the above output.</li>
</ul>
<p>TD.NET includes a library, TestDriven.Framework.dll, which you can use to wire things up to your own test runner.  It contains an interface that you must implement for your plugin to be detected.  TD.NET plugs into Visual Studio to pick up on keyboard shortcuts and the like, then turns that into calls against this interface, allowing you to pick things up from there to do the actual work of running tests.</p>
<p>In the plugin project, I added a reference to TestDriven.Framework.dll and added the following class as a first pass:</p>
<p><div><script src='https://gist.github.com/5149264.js'></script>
<noscript><pre><code></code></pre></noscript></div>
</p>
<p>Since each method just throws an exception with a specific message, I&#8217;ll be able to prove to myself whether or not TD.NET actually found and executed the plugin.  I made the sample consumer project reference the plugin project, and attempted to run the sample test method and test fixture: no dice.  The results were the same as having no test framework in play at all!</p>
<p>There was another piece to the puzzle.</p>
<p>The TD.NET blog explains how to complete the detection of custom test runners: <a href="http://weblogs.asp.net/nunitaddin/archive/2009/11/05/testdriven-net-2-24-xcopy-deployable-test-runners.aspx">XCopy Deployable Test Runners</a>.  Over in the plugin project, I added a text file named TestDrivenPoc.dll.tdnet:</p>
<p><div><script src='https://gist.github.com/5149267.js'></script>
<noscript><pre><code></code></pre></noscript></div>
</p>
<p>In Solution Explorer, I set this text file to &#8220;Copy Always&#8221;.  Now, when I rebuild the solution, the consumer gets a copy of this file right beside the similarly named DLL.  (When it comes time to deploy this to users, I&#8217;ll need to be sure to include this file along with the DLL.)  When running MyTestCase or MyTestFixture, we now see the exception thrown by our fake test framework&#8217;s TD.NET integration:</p>
<p><div><script src='https://gist.github.com/5149272.js'></script>
<noscript><pre><code></code></pre></noscript></div>
</p>
<p><div><script src='https://gist.github.com/5149273.js'></script>
<noscript><pre><code></code></pre></noscript></div>
</p>
<p>Fantastic!  These exceptions prove that TD.NET was able to find our plugin and call methods on it, instead of the default behavior we saw when there was no test framework in place.</p>
<p>To sum up, when creating a test framework that needs to integrate with TD.NET:</p>
<ul>
<li>Reference TestDriven.Framework.dll.</li>
<li>Implement TestDriven.Framework.ITestRunner.</li>
<li>Include a *.tdnet text file whose name matches the test framework&#8217;s DLL, and whose contents identify the plugin&#8217;s DLL and ITestRunner class. (In my case, these two DLLs were one and the same.)</li>
<li>Consumers must reference the test framework and must have the *.tdnet file present.</li>
</ul>
<h2>Eliminate Any Remaining Risks</h2>
<p>Part of the interface strikes me as odd.  Note how in the sample successful output above, we hit &#8220;RunMember&#8221; after telling TD.NET to run a single test method <strong>and</strong> after telling it to run a whole test fixture class.  I would use the word &#8220;member&#8221; to describe a method-belonging-to-a-class, but using &#8220;member&#8221; to describe a whole class surprised me.</p>
<p>I was unsure of how to really implement RunMember(&#8230;), so I wasn&#8217;t finished with the proof of concept.  With a little trial and error, I fleshed out just enough of this method to see how you can tell the difference between single-test-method execution versus whole-test-fixture execution:</p>
<p><div><script src='https://gist.github.com/5149277.js'></script>
<noscript><pre><code></code></pre></noscript></div>
</p>
<p>This implementation determines whether we are running a test method or a test fixure, announces that fact in the output, and then reports success since we&#8217;re still just faking test execution.  In writing this method, I learned that MemberInfo, part of the .NET reflection API, can be used to describe class members as well as classes.</p>
<blockquote><p>The awkward wording in the TD.NET interface is in fact due to awkward naming in the .NET Framework.  I&#8217;ll want to be sure to avoid letting that complexity leak out into my own API.  Bad naming can spread like a disease.  If it posed an obstacle to my understanding ITestRunner, it would pose a similar obstacle to anyone reading Fixie&#8217;s implementation.</p></blockquote>
<p>Now, when I attempt to run my sample tests at the method or class level, I get the expected output:</p>
<p><div><script src='https://gist.github.com/5149279.js'></script>
<noscript><pre><code></code></pre></noscript></div>
</p>
<h2>Set the Proof of Concept Aside</h2>
<p>This is a proof of concept.  I don&#8217;t actually want this code in my real Solution.  Now that I have these notes handy, it can <em>and should</em> be discarded.  I&#8217;ll grow the real implementation with more care when I&#8217;m ready to implement it.  With a little strongly-typed whiteboarding, I&#8217;ve removed the largest risk to the project and can feel free to proceed.</p>
<p>Next week, we&#8217;ll cover the nuts and bolts of setting up a new project from scratch, covering Fixie&#8217;s initial set of commits.</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2013-03-13T00:00:00-05:00" pubdate data-updated="true">Mar 13<span>th</span>, 2013</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/developer-deep-dive/'>Developer Deep Dive</a>


</div>
	
</div>
</article>

<nav id="pagenavi">
    
        <a href="/blog/page/4/" class="prev">Prev</a>
    
    
        <a href="/blog/page/6/" class="next">Next</a>
    
    <div class="center"><a href="/blog/archives">Blog Archives</a></div>
</nav></div>
	<footer id="footer" class="inner">Copyright &copy; 2013

    Headspring Labs

</footer>
	<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->






</body>
</html>