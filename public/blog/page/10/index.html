
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>Headspring Labs</title>
	<meta name="author" content="Headspring Labs">

	
	<meta name="description" content="Patrick McVeety-Mill is one of a kind here at Headspring. We found him pretty much straight out of college, but his resume and portfolio showed a &hellip;">
	
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="/atom.xml" rel="alternate" title="Headspring Labs" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script async="true" src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	
</head>


<body>
	<header id="header" class="inner"><h1><a href="/">Headspring Labs</a></h1>
<nav id="main-nav"><ul class="main">
	<li><a href="/">Blog</a></li>
	<li><a href="/blog/archives">Archives</a></li>
</ul>
</nav>
<nav id="mobile-nav">
	<div class="alignleft menu">
		<a class="button">Menu</a>
		<div class="container"><ul class="main">
	<li><a href="/">Blog</a></li>
	<li><a href="/blog/archives">Archives</a></li>
</ul>
</div>
	</div>
	<div class="alignright search">
		<a class="button"></a>
		<div class="container">
			<form action="http://google.com/search" method="get">
				<input type="text" name="q" results="0">
				<input type="hidden" name="q" value="site:headspringlabs.com">
			</form>
		</div>
	</div>
</nav>
<nav id="sub-nav" class="alignright">
	<div class="social">
		
		
		
		<a class="twitter" href="http://twitter.com/HeadspringLabs" title="Twitter">Twitter</a>
		
		
		<a class="github" href="https://github.com/HeadspringLabs" title="GitHub">GitHub</a>
		
    
		
		
		
		
		
		<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
    
	</div>
	<form class="search" action="http://google.com/search" method="get">
		<input class="alignright" type="text" name="q" results="0">
		<input type="hidden" name="q" value="site:headspringlabs.com">
	</form>
</nav>

</header>
	
		
	
	<div id="content" class="inner">


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/get-to-know-a-developer-patrick-mcveety-mill/">
		
			Get to Know a Developer: Patrick McVeety-Mill</a>
	</h2>
	<div class="entry-content">
		<p><a href="http://www.headspring.com/wp-content/uploads/2012/09/photo.jpg"><img class="alignright size-medium wp-image-5718" title="Patrick McVeety-Mill" src="http://www.headspring.com/wp-content/uploads/2012/09/photo-224x300.jpg" alt="Patrick McVeety-Mill" width="224" height="300" /></a>Patrick McVeety-Mill is one of a kind here at Headspring. We found him pretty much straight out of college, but his resume and <a href="http://loudandabrasive.com/">portfolio</a> showed a lot of potential.  We’ve never hired a fresh graduate before, but he’s proven to encompass every ounce of thoughtfulness, creativity and skill we have come to expect from a seasoned developer.  After a few weeks on the job, I’m convinced!</p>
<p>Patrick is a native Austinite, but graduated from the Rochester Institute of Technology in Game Design and Development. We’ll forgive him.</p>
<p><strong>Are you an expert at anything?</strong></p>
<p>Nothing that I can think of; maybe frying eggs. I do have some skill in c# and some other programming know-how. I’m pretty good at game design and storytelling, too.</p>
<p><strong>What led you to software development?</strong></p>
<p>I really enjoy developing games but it was never my intention to pursue it as a career. I like programming and the constant creation and adoption of new technology fascinates me. The client-facing side of software development always appealed to me and it seemed like a good field to put both my programming and communication skills to good use.</p>
<p><strong>What did you learn first?</strong></p>
<p>When I got to college I had barely used a computer aside from playing games and word processing. I started off in Java but very quickly moved to c# and then later c++. The progression of languages went hand-in-hand with learning more about software and web design, fun theory, and fancy algorithms that games use.</p>
<p>I remember going to the computer lab in elementary school and playing around with this program called &#8220;HyperStudio.&#8221; It was like a primitive blend of Flash Studio and PowerPoint. You could set up little interactive clipart objects and link between pages and animate things. I used it to make goofy little point-and-click adventure games. It was a lot of fun and my first exposure to digital interactive design, I suppose.</p>
<p><strong>Do you like teaching?</strong></p>
<p>Absolutely. I worked at a dining hall in college and it was a lot of fun to train people on everything from how to make a good rueben to mopping floors. Of course more intellectually stimulating things are fun to teach, too. Not that making a good rueben isn’t intellectually stimulating.</p>
<p><strong>Where do begin when learning something new?</strong></p>
<p>I usually start by asking folks I know: coworkers, buddies, former professors and classmates. People are a good resource since they can elaborate or adapt their explanation on the fly, whereas books are more static. That being said, I always ask about the best books on a topic and follow through with those.</p>
<p><strong>How do you gauge “time well spent”?</strong></p>
<p>Productivity can be a tough thing to gauge, especially when people disagree on what “production” entails.  For me, as long as I’m learning something, making something, or building a relationship with those involved in the producing, I feel it’s time well spent. And even better spent if I can do all those at once.</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2012-09-07T00:00:00-05:00" pubdate data-updated="true">Sep 7<span>th</span>, 2012</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/blog/'>Blog</a>, <a class='category' href='/blog/categories/bonus/'>Bonus!</a>, <a class='category' href='/blog/categories/developer-deep-dive/'>Developer Deep Dive</a>, <a class='category' href='/blog/categories/get-to-know-a-headspringer/'>Get To Know a Headspringer</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/headspring-1st-down-technologies/">
		
			Headspring & 1st Down Technologies Launch App That Delivers Complete Playbook Tool for Youth League Coaches and Players</a>
	</h2>
	<div class="entry-content">
		<p><strong>AUSTIN, TX – Sept, 2012,</strong> Headspring, an Austin-based software development company, today announced the launch of FirstDown PlayBook™ Youth, a football app for mobile and tablet devices developed for 1st Down Technologies, LLC, an Austin-based sports software company.</p>
<p>FirstDown PlayBook™ Youth app is a tool for youth league football coaches and players to browse formation packs full of professionally drawn plays, create playbooks, and develop practice and game plans. The app also allows users to print the coach’s playbook and player wristband sheets.  Using HTML5 technology, the playbook is web-based and gives coaches and players immediate access on multiple mobile and tablet devices. Real-time changes can be made offline during football games and updated online when an Internet connection is available. </p>
<p>“Working with the team at 1st Down Technologies on this innovative football app has been a lot of fun,” said Kevin Hurwitz, chief architect of Headspring. “By creating the program with HTML5 versus iOS, the technology is compatible on virtually all mobile and tablet devices, which allows flexibility and caters to the different platforms used by coaches and players.”</p>
<p>Coach Charlie Coiner, 27-year veteran at both the NFL and NCAA levels, and current assistant coach of a division one NCAA football team, founded 1st Down Technologies in 2011.  His goal was to help coaches at all levels spend more time developing youth football players and less time consumed with designing plays. For more information about 1st Down Technologies, visit <a href="http://www.firstdownapp.com/">www.firstdownapp.com</a>.</p>
<p>“We’re excited to launch this app just in time for football season,” said Keith German, Business Operations Executive of 1st Down Technologies. “The Headspring team was instrumental in making our vision a reality.  The entire process was seamless and we are excited to offer an app that will help take youth football coaching and player development to new levels.”</p>
<p><strong><em>About Headspring                                                                                                          </em></strong></p>
<p><em>Headspring is a custom application development and consulting firm, helping businesses leverage the maintainable custom software needed to keep competing and leading in their industries. The Austin-based company has proudly served Texas businesses since 2001. Headspring is listed in the Austin Business Journal’s Best Places to Work in 2012.  In 2009, the company was named #127 on Inc. 500, the exclusive ranking of the nation’s fastest-growing private companies. For more information about software application development, visit </em><a href="http://www.headspring.com/"><em>www.headspring.com</em></a><em>.</em></p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2012-09-05T00:00:00-05:00" pubdate data-updated="true">Sep 5<span>th</span>, 2012</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/press/'>Press</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/headspring-hosts-central-texas-givecamp-to-benefit-10-local-non-profits/">
		
			Headspring Hosts Central Texas GiveCamp to Benefit Nine Local Non-profits</a>
	</h2>
	<div class="entry-content">
		<p style="text-align: left;" align="center"><em>Sponsors and Web Developers Wanted for September Event</em></p>
<p><strong><a href="http://www.headspring.com/wp-content/uploads/2012/06/Banner.png"><img class="alignright size-medium wp-image-5706" title="Central Texas GiveCamp Banner" src="http://www.headspring.com/wp-content/uploads/2012/06/Banner-300x300.png" alt="Central Texas GiveCamp Banner" width="300" height="300" /></a>AUSTIN, TX – August 2012,</strong> Headspring announces Central Texas GiveCamp, a three-day collaboration of software development teams building websites for 10 local non-profit organizations. <strong><em>The event begins on Friday, September 28 through Sunday, September 30, 2012</em></strong><em>.</em> GiveCamp is a national initiative that happens throughout the year in various cities. Central Texas GiveCamp is being hosted in Austin for the first time and will be held at Headspring’s new headquarters.</p>
<p>“Employees at Headspring are community-minded and spearhead the company’s charitable efforts,” said Dustin Wells, CEO of Headspring. “We are excited to host this inaugural Central Texas GiveCamp and give back in a tangible way that helps sustain the good work being done by nonprofits in our communities.”</p>
<p>Central Texas GiveCamp is open to all interested software developers. Software developers will gather at the Headspring office to design and develop updated websites for nine local non-profit organizations, including Arlington Urban Ministries, A.S.P.I.R.E. (Awarding Students and Promoting Increased Rigor in Education), Austin Partners in Education, Bluebonnet RCD, Colorado River Foundation, Dallas Rape Crisis Center, Texas Hill Country RCD, Texas Kidney Foundation, and TexVet.</p>
<p>“Texas Association of Nonprofit Organizations (TANO) is looking forward to seeing what the teams will create at Central Texas GiveCamp,” said Ellen Tucker, Director of Member Services for TANO. “We’re honored to be a part of the event. The support of organizations like Headspring helps our nonprofits focus more energy on their mission, creating a more positive impact for the people of Texas.”</p>
<p>To learn more about Central Texas GiveCamp and get involved as a developer or sponsor, please visit <a href="http://ctxgivecamp.org/">http://ctxgivecamp.org</a> or call Headspring at (512) 459-2260. For more information about TANO, visit www.TANO.org.</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2012-08-30T00:00:00-05:00" pubdate data-updated="true">Aug 30<span>th</span>, 2012</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/press/'>Press</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/a-c-feature-that-shocks-the-conscience/">
		
			A C# Feature That Shocks the Conscience</a>
	</h2>
	<div class="entry-content">
		<p>The &#8220;default arguments&#8221; feature in C# seems like a great time-saver at first, but there is a sharp difference between what it <em>feels</em> like it does versus what it <em>actually</em> does which can lead to surprises.  Recently, fellow Headspring consultant <a href="https://twitter.com/pedroreys">Pedro Reys</a> discovered a particularly bizarre gotcha related to default arguments.</p>
<h2>Default Arugments Provide Brevity</h2>
<p>Let&#8217;s start with the pain that default arguments are meant to solve.  When overloading a method, we often do so because some arguments aren&#8217;t always required or because some arguments have a reasonable default that you don&#8217;t want to make consumers explicitly write again and again:</p>
<p><div><script src='https://gist.github.com/3456037.js'></script>
<noscript><pre><code></code></pre></noscript></div>
</p>
<p>Here, we don&#8217;t want to make the consumer <em>always</em> specify the argument when a reasonable default exists.  When you want to specify a value, you can.  We have one overload simply call the other in order to avoid repeating ourselves.  Despite trying to avoid repeating ourselves, we really still have duplicated a few lines and a handful of characters of code here.  Enter default arguments:</p>
<p><div><script src='https://gist.github.com/3456047.js'></script>
<noscript><pre><code></code></pre></noscript></div>
</p>
<h2>What Really Happens</h2>
<p>This seems like a great little addition to the language.  It <em>feels</em> like the compiler is going to react to this by effectively writing the simple overload for me.  Unfortunately, including a default value does something else entirely.  Instead of &#8220;writing my overload for me&#8221;, the compiler <em>alters the call sites</em> that make use of this method, effectively copying-and-pasting a <code>null</code> whenever we call the method.</p>
<p>In simple scenarios, this distinction doesn&#8217;t matter.  The moment it does matter, though, you are going to be surprised.</p>
<h2>Interfaces Allow Contradictory Defaults</h2>
<p>Let&#8217;s say we&#8217;ve got some classes that perform an operation against an input int:</p>
<p><div><script src='https://gist.github.com/3456058.js'></script>
<noscript><pre><code></code></pre></noscript></div>
</p>
<p>Ok, no surprises yet.  When we omitted the argument in the first call, the compiler copied and pasted a 1 into the call site.</p>
<p>As we start adding more and more such operations to the program, a developer finds a need to extract a common interface for all such one-argument operations.  This developer means well, but when he writes the interface definition, he doesn&#8217;t look at each and every implementing class&#8217;s defaults.  He figures 0 is a reasonable default for an integer, and defines it like so:</p>
<p><div><script src='https://gist.github.com/3456065.js'></script>
<noscript><pre><code></code></pre></noscript></div>
</p>
<p><em>Note that the default in the interface is different from the defaults on the concrete classes.</em></p>
<p>Running the same sample code produces the same output as before:</p>
<p><div><script src='https://gist.github.com/3456075.js'></script>
<noscript><pre><code></code></pre></noscript></div>
</p>
<p>This makes sense.  We&#8217;re calling <code>Negate.Apply</code>, and <code>Negate.Apply</code>&#8217;s default comes into play just like before.  We might (incorrectly!) conclude that the concrete runtime type (<code>Negate</code>) is used to determine which default value &#8220;wins&#8221; the competition.</p>
<p>Later, a new developer joins the project.  He is unaware that the interface and concrete classes have conflicting defaults.  He&#8217;s read up on SOLID principles and naturally he wants to favor abstract types over concrete types.  He makes one seemingly-safe change to the code, changing only the declared type of the <code>operation</code> variable:</p>
<p><div><script src='https://gist.github.com/3456080.js'></script>
<noscript><pre><code></code></pre></noscript></div>
</p>
<blockquote><p>The C# compiler finds our efforts to apply &#8220;nonbreaking changes&#8221; quaint but ultimately futile.</p></blockquote>
<h2>What in the <em>what!?</em></h2>
<p>The runtime type of <code>operation</code> is the same as in the previous execution, and that type oh-so-clearly defines its own default as 1.  However, <strong>the selection of which method will actually run is a separate decision from the selection of which default value gets copy/pasted to the call site.</strong>  Default value selection is based on the compile-time type of <code>operation</code> (<code>IUnaryOperation</code>), because the copy/paste <em>happens</em> at compile time.  The selection of which method needs to execute happens at runtime, upon inspecting the actual type of <code>operation</code> (<code>Negate</code>).</p>
<p>In order to use default values well, you have to constantly think about how they were implemented.  That&#8217;s enough to make you want to completely avoid this feature.</p>
<p>I&#8217;m still willing to use default arguments, with one simple rule of thumb: <strong>pretend that you may only ever use a default value of 0, null, or false; <a href="http://msdn.microsoft.com/en-us/library/83fhsxwc(v=vs.80).aspx">the same defaults</a> we already expect for otherwise-uninitialized variables.</strong>  If we always use these predictable defaults, we can avoid verbose overload definitions while being confident that we won&#8217;t have our explicit defaults ignored at runtime.</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2012-08-29T00:00:00-05:00" pubdate data-updated="true">Aug 29<span>th</span>, 2012</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/developer-deep-dive/'>Developer Deep Dive</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/quashing-incidental-complexity/">
		
			Quashing Incidental Complexity</a>
	</h2>
	<div class="entry-content">
		<p>This post is the conclusion to a 7-part series on identifying and resolving incidental complexity in your software projects.  It assumes you&#8217;ve already read the earlier posts (linked in the sections below).</p>
<p>The problems I&#8217;ve faced can crop up in any project.  When a concept or responsibility gets applied to the wrong abstraction, we subconsciously start to add workarounds just to make things work at all.  These workarounds take up space, physically as excess lines of code and mentally as distractions from your true intent.  Workarounds beget workarounds, and the problem feeds itself until you think, &#8220;What a mess!  I need to rewrite it all!&#8221;</p>
<p>By placing responsibilities in their proper home, you can combat this feedback loop and keep your code clean.</p>
<h2>A Troubled Project</h2>
<p>In <a href="http://www.headspring.com/blog/developer-deep-dive/essential-vs-incidental-complexity/">Essential vs Incidental Complexity</a>, I admitted that my pet project, a compiler for an experimental language called <a href="https://github.com/plioi/rook">Rook</a>, was starting to run into problems.</p>
<p>In a healthy project, it can actually get easier to add new features the further along you go, as you discover and flesh out abstractions that help rather than hinder progress.  In Rook, it was getting harder and harder to add new features.  This difficulty was a sign that I was working with the wrong abstractions.</p>
<p>Two classes in particular were starting to grow wildly complex: Scope (a dictionary-like type that describes which identifiers are visible from the point of view of a line of input source code), and TypeChecker (a recursive process which determines the type of all expressions).</p>
<p>I&#8217;d like to think I&#8217;m pretty good at writing software, but here I am admitting I created something too complex for its own good.  <strong>This can happen to anyone</strong>.  The important thing to know is that you can always take steps to turn things around.</p>
<blockquote><p>It&#8217;s tempting to chuck everything and embark on a rewrite, but I&#8217;ve done that before (with this project!) and I&#8217;d rather fix what I have over the course of a few <em>weeks</em> than rewrite it and find myself in the same spot in a few <em>years</em>.</p></blockquote>
<p>This kind of problem has a direct connection to incidental complexity.  If your abstractions are working against you, you spend more lines of code serving them than they spend serving you.  It starts to get harder and harder to see the intent behind a given method because half of the characters in it amount to boilerplate. </p>
<p>As I said, this can happen to anyone.  The solution is to identify which abstractions are faulty, and adjust them in small and safe increments until they start working for you again.  </p>
<p>Faulty abstractions can take many forms:</p>
<h2>Unnecessary Abstractions</h2>
<p>In <a href="http://www.headspring.com/blog/developer-deep-dive/identifying-incidental-complexity/">Identifying Incidental Complexity</a>, TypeChecked&lt;T&gt; was an abstraction that complicated things without adding anything of value.  Its existence required many methods in TypeChecker to waste a lot of time and concentration to recombine very small arrays of error messages, completely distracting the reader from the actual intent of the methods.  It ultimately gave me no benefit, and removing it helped to clean up a lot of ugly code.</p>
<h2>Abstractions with Multiple Personalities</h2>
<p>In <a href="http://www.headspring.com/blog/developer-deep-dive/scope-creep/">Scope Creep</a>, we saw that the Scope abstraction was right in its inception but had gotten extremely complicated over time.</p>
<p>One class absorbed many responsibilities as I began to use it in more and more scenarios.  In fact, I was using one Scope class to represent several different <em>kinds</em> of scope (global, local, etc).  The Scope class had multiple personalities, and I saw that splitting such a class into several classes with a common interface would make it easier to see the actual domain concepts I was trying to represent.</p>
<p>Specifically, I used inheritance and lots of <code>override</code> methods to accomplish this improvement.  I don&#8217;t enjoy doing that, but implementation inhertiance in this case was a <em>tool</em> to nudge things in the right direction in small steps while solidifying what separate classes I needed.</p>
<h2>Brittle Abstractions</h2>
<p>In <a href="http://www.headspring.com/blog/developer-deep-dive/spaghetti-alla-code/">Spaghetti alla Code</a>, we saw how implementation inheritance can motivate some horribly convoluted code that just <em>happens</em> to work.  Scope was separated <em>physically</em> into different classes now, but the method implementations were all tied up in knots.</p>
<p>With lots of <code>virtual/override/base</code> keywords, you have to read <em>all</em> of the code to understand <em>any</em> of the code.  Making changes here without unintended side effects becomes too difficult, making the abstraction brittle in the face of inevitable change.</p>
<blockquote><p>Implementation inheritance is like writing in assembly language: it <em>works</em>, but good luck ever <em>editing</em> it with confidence.</p></blockquote>
<p>The solution here was to favor composition over inheritance.  Each individual class can be understood by only looking at that class.  The new implementations read a lot more like an English description of the domain being modeled.</p>
<h2>Anemic Abstractions</h2>
<p>In <a href="http://www.headspring.com/blog/developer-deep-dive/primitive-obsession/">Primitive Obsession</a>, I had an abstraction that existed in name only: TypeVariable was a simple wrapper for an int.  I was so obsessed that the TypeVariable class was &#8220;just a glorified int&#8221; that it never occurred to me to put more smarts into it.</p>
<p>Not realizing that this class was a good home for some important concepts, I had to throw those concepts <em>anywhere</em> that would work, and that just happened to be the unfortunate Scope class mentioned before (as if it didn&#8217;t have enough to worry about).</p>
<blockquote><p>Scope was a bit of an Idea Sponge at this point.</p></blockquote>
<p>The solution was to recognize that the TypeVariable abstraction was incomplete, and lots of things got simpler once an appropriate responsibility moved into the TypeVariable class.</p>
<h2>Complected Abstractions</h2>
<p>In <a href="http://www.headspring.com/blog/developer-deep-dive/detect-reflect-decomplect/">Detect, Reflect, Decomplect</a>, we saw that when two separate ideas get complected (braided) together, we have to start writing extra code to work around that complexity.</p>
<p>I was twisting up success and failure results into a single return value, forcing me to place special meaning on <em>null</em>s, and to include excessive early return statements throughout many methods.  These extra return statements set the code in intellectual concrete, severely limiting my ability to apply any cleanup refactorings.</p>
<p>By untwisting the concepts of success and failure in this class, and by avoiding null with the Null Object pattern, the troubled TypeChecker class finally got <em>linear</em> enough to have a hope of ever getting cleaned up.</p>
<h2>Code is Too Malleable to be Intractable</h2>
<p>When you find the complexity of your projects growing out of control, don&#8217;t lose hope!  Take a step back, identify which abstractions you&#8217;re doing <em>extra</em> work <em>for</em>, and nudge them in small and safe steps until they better-represent the Truth of your domain.</p>
<p>You don&#8217;t even have to put forward progress on hold; these kinds of improvements can be a small part of your daily activities.</p>
<p>Make your life easier and your project healthier by growing and cultivating abstractions that let you write <em>less and less</em> code.</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2012-08-24T00:00:00-05:00" pubdate data-updated="true">Aug 24<span>th</span>, 2012</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/developer-deep-dive/'>Developer Deep Dive</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/detect-reflect-decomplect/">
		
			Detect, Reflect, Decomplect</a>
	</h2>
	<div class="entry-content">
		<p>This is part 6 of an N-part series on identifying and resolving incidental complexity in your software projects.  This post assumes you&#8217;ve already read the earlier posts:</p>
<ol>
<li><a href="http://www.headspring.com/blog/developer-deep-dive/essential-vs-incidental-complexity/">Essential vs Incidental Complexity</a></li>
<li><a href="http://www.headspring.com/blog/developer-deep-dive/identifying-incidental-complexity/">Identifying Incidental Complexity</a></li>
<li><a href="http://www.headspring.com/blog/developer-deep-dive/scope-creep/">Scope Creep</a></li>
<li><a href="http://www.headspring.com/blog/developer-deep-dive/spaghetti-alla-code/">Spaghetti alla Code</a></li>
<li><a href="http://www.headspring.com/blog/developer-deep-dive/primitive-obsession/">Primitive Obsession</a></li>
</ol>
<p>The act of &#8220;complecting&#8221; two things is to intertwine or braid them together in such a way that creates complexity.  Most incidental complexity in our code comes from getting separate concepts twisted up in ways that make things more complex without moving us any closer to our goals.  Sometimes we intertwine concepts so tightly that we don&#8217;t even realize it&#8217;s happened.  In this post, we&#8217;ll see how I finally untied a code knot that has been staring at me for about two years.</p>
<h2>A Quick Review</h2>
<p><a href="http://www.headspring.com/blog/developer-deep-dive/identifying-incidental-complexity/">A few weeks ago</a>, we saw some improvements made to the TypeChecker class.  This class traverses a tree representing all the source code input to the compiler.  If the input source code has an if-expression, then the tree will contain a node (an instance of the <code>If</code> class) that describes what the raw source code looked like.  As TypeChecker traverses the tree, it attempts to find an appropriate type for each node.  Since Rook&#8217;s if-expressions behave like C#&#8217;s <code>?:</code> ternary operator, the type of an <code>If</code> is the type of the positive and negative branch expressions.</p>
<p>In that post, the original implementation for if-expression type checking looked like this:</p>
<p><div><script src='https://gist.github.com/3151220.js'></script>
<noscript><pre><code></code></pre></noscript></div>
</p>
<p>This implementation used a needlessly-complex return type which motivated extra-complicated <code>return</code> statements.  That return type <em>complected</em> success (a new tree node with a meaningful Type property) with failure (a list of CompilerError messages to propagate up the tree).  Braiding those two ideas led to some verbose sanity checks after each step the method performed, and led to some verbose error-message-propagation in each <code>return</code> statement.</p>
<p>I improved this situation by untying these ideas.  TypeChecker started tracking a single growing list of error messages encountered so far, so that returned objects in the tree traversal methods didn&#8217;t need to pass error messages back to their caller.  At this point, we started returning <code>null</code> every time the method found an error:</p>
<p><div><script src='https://gist.github.com/3154330.js'></script>
<noscript><pre><code></code></pre></noscript></div>
</p>
<h2>Return Statements are &#8220;Extract Method&#8221; Fences</h2>
<p>Surely this change was an improvement, but it didn&#8217;t dramatically improve the health of the TypeChecker class.  TypeChecker is a beast.  The TypeCheck methods for several of the tree nodes are suspiciously similar to each other, so I started out by trying to factor out common helper methods.</p>
<p>I failed immediately every time I tried to do so.</p>
<p>The problem was that most of these methods followed the following pattern:</p>
<ol>
<li>Do one step of the work.</li>
<li>If that step failed, return early (null).</li>
<li>Do one step of the work.</li>
<li>If that step failed, return early (null).</li>
<li>&#8230;</li>
</ol>
<p>Methods will multiple returns are not inherently <em>bad</em>.  I usually limit myself to using multiple returns when a method starts with some initial &#8220;guard&#8221; statements: &#8220;if this call was kind of pointless, return early&#8221;.  Doing so can help to simplify the remainder of the function by clarifying assumptions up front.  Returning multiple times throughout the <em>meat</em> of a method, though, is usually a problem.</p>
<blockquote><p>
    Each time you leave a <code>return</code> statement in the body of a longish method, you are really installing a fence.  You aren&#8217;t going to be able to successfully apply an &#8220;Extract Method&#8221; refactoring <em>across</em> those fence boundaries (try it!), so your method will always be longish with respect to the number of fences.
</p></blockquote>
<p>These fences have kept the TypeCheck methods too longish for about 2 years.  I tried to find ways around this countless times, always resulting in something even more complex than I started with.</p>
<h2>Still Complecting Failure with Success</h2>
<p>Even after the previous improvement to the meaning of returned objects from these methods, I was still complecting success (non-null return) with failure (null return).  Sure, the error-message-collecting code was out of the way now, but I still had to inspect the result of each call to a <code>TypeCheck</code> method.  In the <code>If</code>-expression example above, I couldn&#8217;t trust the returned objects from the three calls to other <code>TypeCheck</code> methods.  I would call it, inspect the result, and then use that to decide whether I should propagate failure by returning null early.</p>
<p>Then it hit me.  What if we could just keep on going if we ran into trouble during the other <code>TypeCheck</code> calls?  Compiler errors aren&#8217;t exceptions: you don&#8217;t want to just stop looking for errors when you encounter a single problem.  By returning early, I wasn&#8217;t just making the code more complex.  I was actually limiting the amount of useful output I was ultimately reporting to the user.  Imagine how annoying it would be if the C# compiler just discarded every other error message it could have reported to you!</p>
<h2>Non-null Nulls</h2>
<p>Just removing the early return statements wouldn&#8217;t be enough, of course.  By continuing the process with nulls in play, I&#8217;d immediately start running into <code>NullReferenceException</code>s.</p>
<p>Even though the methods weren&#8217;t returning nulls themselves anymore, the <code>Type</code> property on the returned objects could still be null.  Before type checking, every node in the tree had a Type property initialized to null, meaning a type hadn&#8217;t been found for the node yet.  Some of the methods in the type checker had to inspect those Type properties in order to make decisions, and nulls would start to become a problem at runtime.</p>
<p>To resolve this, I had to apply the Null Object pattern before I could actually remove the early return statements.  With this pattern, you introduce a class that represents the simplest, most-null-like version of a type as possible.  In this case, I needed something that implemented my <code>DataType</code> abstract class while being completely uninteresting on its own.  Instances of this new <a href="https://github.com/plioi/rook/commit/52686db2b801f414c932f92e390f44ab68c7040b"><code>UnknownType</code></a> class could then be liberally sprinkled over the whole tree prior to type checking.  As the new and improved type checker encountered errors, it could safely proceed to find yet more errors knowing full well that in the worst case it would be working with <code>UnknownType</code> instead of nulls.</p>
<blockquote><p>Using the Null Object pattern, I could safely remove the problematic early-return statements.  The type checker now finds all the errors it can, and our return values no longer complect success with failure.</p></blockquote>
<p>The many <code>TypeCheck</code> methods are now much shorter, easier to read, and lack the fences that would stand in the way of further refactorings.</p>
<h2>Before and After the Return Value Decomplection</h2>
<p><strong>If-Expression Type Checking</strong></p>
<p><em>Before:</em><br />
<div><script src='https://gist.github.com/3151220.js'></script>
<noscript><pre><code></code></pre></noscript></div>
</p>
<p><em>After:</em><br />
<div><script src='https://gist.github.com/3390149.js'></script>
<noscript><pre><code></code></pre></noscript></div>
</p>
<p><strong>Class Declaration Type Checking</strong></p>
<p><em>Before:</em><br />
<div><script src='https://gist.github.com/3390168.js'></script>
<noscript><pre><code></code></pre></noscript></div>
</p>
<p><em>After:</em><br />
<div><script src='https://gist.github.com/3390159.js'></script>
<noscript><pre><code></code></pre></noscript></div>
</p>
<p><strong>Function Declaration Type Checking</strong></p>
<p><em>Before:</em><br />
<div><script src='https://gist.github.com/3390169.js'></script>
<noscript><pre><code></code></pre></noscript></div>
</p>
<p><em>After:</em><br />
<div><script src='https://gist.github.com/3390164.js'></script>
<noscript><pre><code></code></pre></noscript></div>
</p>
<h2>Detect, Reflect, Decomplect</h2>
<p>When you find yourself looking at suspiciously-complex code,</p>
<ol>
<li><strong>Detect</strong> whether you have two or more ideas all tied up and twisted together.</li>
<li><strong>Reflect</strong> on what a successful untwisting would look like.  Where will each idea live once they are separated?  Will you lose functionality in the process?  Will you gain some functionality that has been hindered by the complexity?  Will this effort open the door to further cleanup?</li>
<li><strong>Decomplect</strong> the hell out of that mess and bask in the glory of your cleaner codebase.</li>
</ol>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2012-08-18T00:00:00-05:00" pubdate data-updated="true">Aug 18<span>th</span>, 2012</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/developer-deep-dive/'>Developer Deep Dive</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/primitive-obsession/">
		
			Primitive Obsession</a>
	</h2>
	<div class="entry-content">
		<p>This is part 5 of an N-part series on identifying and resolving incidental complexity in your software projects.  This post assumes you&#8217;ve already read the earlier posts:</p>
<ol>
<li><a href="http://www.headspring.com/blog/developer-deep-dive/essential-vs-incidental-complexity/">Essential vs Incidental Complexity</a></li>
<li><a href="http://www.headspring.com/blog/developer-deep-dive/identifying-incidental-complexity/">Identifying Incidental Complexity</a></li>
<li><a href="http://www.headspring.com/blog/developer-deep-dive/scope-creep/">Scope Creep</a></li>
<li><a href="http://www.headspring.com/blog/developer-deep-dive/spaghetti-alla-code/">Spaghetti alla Code</a></li>
</ol>
<h2>Assumed Disaster, Assumed Success</h2>
<p>My younger brother will be starting on a PhD in San Diego this fall, and we were recently talking about the drive he&#8217;ll be taking from Austin.  Wearing the Overprotective Sibling Hat, I was asking about his contingency plans should something go wrong: &#8220;If your vehicle breaks down, who are you planning to call for help?&#8221; and the like.  I could tell I was starting to annoy, so I said &#8220;Oh, sorry, that&#8217;s the software guy talking.  Something can always go wrong.&#8221;  In response, he said, &#8220;Well I&#8217;m a mathematician.  Everything is always perfect.&#8221;</p>
<p>What did I mean by &#8220;Something can always go wrong&#8221;?  Even the smallest decisions a programmer makes can have far-reaching consequences, making a system more complex than it needs to be and opening the door for bugs.  This week, we&#8217;ll see how &#8220;Primitive Obsession&#8221; affected a very small decision in my compiler, and that poor decision spread like a weed.  It caused me to write awkward methods across a class hierarchy, forced me to pass around more objects from one function call to the next when doing so shouldn&#8217;t have been necessary, and opened the door to what would have been <strong>extremely</strong> troublesome bugs.</p>
<h2>Primitive Obsession</h2>
<p><a href="http://c2.com/cgi/wiki?PrimitiveObsession">Primitive Obsession</a> is when you focus too much on simple data types like ints, bools, and strings when it would be more helpful and communicative to use classes composed of those simpler types.</p>
<p>For instance, I once worked on a system that dealt with phone numbers, and for a long time we just passed phone numbers around as strings.  The downside was that most functions receiving these strings had to be paranoid that they were being passed a string that wasn&#8217;t really a phone number, like &#8220;&#8221;, &#8220;Dr. Martin Van Nostrand&#8221;, or &#8220;555-0100&#8221; (which looks like a phone number but is reserved for TV).</p>
<p>Suspicious of incoming phone number strings, most functions would start by sanity checking the input by calling one of several static validation functions.  It was annoying, bug prone, and inflated the size of the code.</p>
<p>After introducing a smarter PhoneNumber class, we had less to worry about: validating and parsing a string was the only way to get an instance, so if you were passed one of these you could assume that it was already usable.  Even better, lots of those free-floating static string-twiddling methods now had a new home.</p>
<h2>Type Variables</h2>
<p>In my compiler, I over-ephasized the importance of a simple int, and that obsession led to some problems.  Before we get to that, though, we should talk a little about Type Variables.</p>
<p>When a compiler is type-checking your code, it often has to reason about the type of an expression for which there is not yet enough information.  When type checking an &#8216;if&#8217; condition, we know that the condition&#8217;s type had better be boolean, but at the moment we are inspecting the if statement there might not be enough information about the types of variables appearing in that condition.  Maybe the condition refers to a lambda expression parameter, and we won&#8217;t be able to nail down the type of that parameter until we <em>later</em> discover the <code>Func</code> type of the lambda as a whole.</p>
<blockquote><p>When the compiler has to start reasoning about types it doesn&#8217;t know about yet, it has to introduce a temporary placeholder: a stand-in for the real type that we will eventually nail down to something concrete.  We (unfortunately) call these Type Variables.</p></blockquote>
<p>It&#8217;s easy to get type variables confused with generics, because there&#8217;s a definite overlap.  Consider a generic method in C#:</p>
<p><div><script src='https://gist.github.com/3327067.js'></script>
<noscript><pre><code></code></pre></noscript></div>
</p>
<p>When a compiler makes its first pass through this code, it can store the definition of Echo using a type variable everywhere we see a <code>T</code> to mean &#8220;Echo does stuff with some type but we don&#8217;t know what that type is yet.&#8221;</p>
<p>An important quality of these <em>generic type variables</em> is that every time we call Echo, we need to nail down the type of <code>T</code> all over again.  A first call to Echo(1) nails down the type variable to int, and a subsequent call to Echo(&#8220;Hello!&#8221;) nails down the type variable to string.</p>
<p>We can&#8217;t, however, conclude that type variables are synonymous with generic type parameters like <code>T</code> above.  There are lots of reasons a compiler won&#8217;t yet know about a type; these placeholders are not limited to explicitly-declared generic type parameter like Echo&#8217;s <code>T</code>.  Some of these type variables are <em>nongeneric</em>, meaning their behavior is a little different from the Echo example.  With Echo, we got to rediscover the concrete type with each call.  When we&#8217;re not dealing with generics, though, we can only nail things down <em>once</em>.</p>
<p>This is pretty complicated.</p>
<p>Fortunately, there are only a few details of this discussion that are necessary to understand the rest of this post:</p>
<ol>
<li>A compiler needs to reason about types before it has enough information to know exactly what the type of an expression really is.</li>
<li>In these cases it generates a temporary placeholder for a type, called a Type Variable.</li>
<li>Eventually we gather clues to nail down each Type Variable to something specific like bool, string, Customer, …</li>
<li>Some type variables behave like familiar generics, and some are <em>special</em> with their own behavior.</li>
</ol>
<h2>Obsessing Over Integers</h2>
<p>Very early in development of my type checker, I was guilty of Primitive Obsession.  I needed a TypeVariable class that implemented my DataType interface so they could be used alongside concrete types like Integer, Boolean, and the like.  Similar to a .NET Guid, I needed to simply generate <em>some new unique thing</em> that wouldn&#8217;t be considered equal to the ones generated before.</p>
<p>I implemented TypeVariable as a trivial wrapper around an int, and made it so that each time you created a new one it would use a unique int that hadn&#8217;t been used yet.  The first time you needed a placeholder for a type, it would be Unknown Type #0, the second would be Unknown Type #1, etc.</p>
<blockquote><p>I thought I was avoiding Primitive Obsession by wrapping this int in a meaningfully-named class that took part in my domain.  However, my mistake was that I <em>continued to think of these things as glorified ints</em>.</p></blockquote>
<p>Because I always thought of them as a primitive type, it never occurred to me that I might want to put more information or behavior in that class.  When my code started to care about the distinction between <em>generic</em> and <em>nongeneric</em> type variables hinted at above, <em>I couldn&#8217;t see that that concept belonged in the TypeVariable class</em> and instead I threw that concept around wherever I could to get the system to work.</p>
<p>The generic/nongeneric distinction wound up in the Scope classes that I&#8217;ve been discussing here the last few weeks.</p>
<p>Scope is <em>supposed</em> to be a dictionary-like type that stores the declared type of identifiers in scope.  If the code being compiled has a local <code>int x</code> varaible and a global <code>Echo</code> function, this dictionary-like thing would have a key &#8220;x&#8221; with value &#8220;int&#8221; and a key &#8220;Echo&#8221; with value &#8220;Func&lt;T, T&gt;&#8221;.</p>
<p>That&#8217;s all Scope was supposed to be, but it also took on the responsibility of knowing which TypeVariable instances were generic and which ones weren&#8217;t.  <strong>Wat.</strong></p>
<p>Here&#8217;s what the troubled version looked like.  Note especially the LambdaScope class, which took on the awkward responsibility of remembering which TypeVariables were <em>special</em>:</p>
<p><div><script src='https://gist.github.com/3327028.js'></script>
<noscript><pre><code></code></pre></noscript></div>
</p>
<p>Holy cow, that is complex!  The different implementations of IsGeneric work together to make up for the fact that we couldn&#8217;t just <em>ask</em> each TypeVariable whether or not it was had generics-behavior, and that all grew from my preoccupation with these things being glorified ints.</p>
<p>What&#8217;s worse is that these implementations of IsGeneric only give accurate answers when you <em>happen</em> to call them correctly.  Note how GlobalScope always returns true.  If I ever called that implementation for a TypeVariable that really <em>isn&#8217;t</em> generic, I&#8217;d be working with a lie.  The compiler didn&#8217;t <em>happen</em> to rely on any liars yet, but if it ever did I&#8217;d be faced with some incomprehensible bugs.</p>
<h2>Fixing TypeVariable and Scope</h2>
<p>One simple change to the TypeVariable abstraction was all I needed to fix this mess.</p>
<p>The first commit addressed the main problem: <a href="https://github.com/plioi/rook/commit/bc56fe6495d0fe56702ee825673b9ad74b56d977">TypeVariables know whether or not they are generic type variables upon construction. Scope no longer tracks or cares about whether type variables are generic.</a>  In this commit, TypeVariable gained a new IsGeneric property, all of the IsGeneric implementations were removed from Scope classes, and usages got cleaned up.  I even got to remove a unit test that in hindsight <em>asserted the horribly bug-prone behavior mentioned earlier</em>.  I was so confused by my own complexity that I was <em>asserting that it should behave dangerously</em>!</p>
<p>After this commit, I realized that the LambdaScope class was now completely pointless.  It wrapped an instance of another Scope class and all the methods now just defered to that other instance.  LambdaScope no longer added any new ideas, <a href="https://github.com/plioi/rook/commit/e965b694fe9b7daa41367632be33a570365fa8f8">and could be removed</a>.</p>
<blockquote><p>In addition to all of this cleanup and simplification, I&#8217;m starting to see how TypeVariable could start to absorb some more misplaced behavior from the still-too-complex TypeChecker class.  The fact that it&#8217;s getting <em>easier</em> to start seeing what else can be improved is a sign that the last few weeks&#8217; worth of refactorings are actually starting to pay off!</p></blockquote>
<h2>Beware Primitive Obsession</h2>
<p>As we&#8217;ve seen, Primitive Obsession isn&#8217;t just about focusing on simple types when your own domain objects are better.  Even when I made my ints into TypeVariables, I was still thinking in terms of trivial types.</p>
<p>When focusing too much on trivial types, we forget to place behaviors or related information in their most appropriate home.  This mistake leads us to place behavior and state <em>just about anywhere it&#8217;ll work</em>, leading to more mistakes.</p>
<blockquote><p>A tiny bit of obsession with a tiny type can grow through your project like a weed, spreading complexity to everything it touches.</p></blockquote>
<p>To resolve these problems, try to recognize that your simple types may deserve to be classes of their own.  Once you&#8217;ve given these concepts a useful name in your domain, don&#8217;t stop there!  Make these new types smarter, taking on behavior appropriate to the type so that the rest of your system doesn&#8217;t have to compensate for them.</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2012-08-11T00:00:00-05:00" pubdate data-updated="true">Aug 11<span>th</span>, 2012</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/developer-deep-dive/'>Developer Deep Dive</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/spaghetti-alla-code/">
		
			Spaghetti Alla Code</a>
	</h2>
	<div class="entry-content">
		<p>This is part 4 of an N-part series on identifying and resolving incidental complexity in your software projects.  This post assumes you&#8217;ve already read the earlier posts:</p>
<ol>
<li><a href="http://www.headspring.com/blog/developer-deep-dive/essential-vs-incidental-complexity/">Essential vs Incidental Complexity</a></li>
<li><a href="http://www.headspring.com/blog/developer-deep-dive/identifying-incidental-complexity/">Identifying Incidental Complexity</a></li>
<li><a href="http://www.headspring.com/blog/developer-deep-dive/scope-creep/">Scope Creep</a></li>
</ol>
<h2>Recipe: Spaghetti alla Code</h2>
<p>INGREDIENTS</p>
<ul>
<li>1 cup &#8216;virtual&#8217; keywords</li>
<li>3 cups &#8216;override&#8217; keywords</li>
<li>1 pinch of &#8216;base&#8217; keyword</li>
<li>1 generous dollop of moxie</li>
</ul>
<p>DIRECTIONS</p>
<ol>
<li>Combine ingredients in large mixing hierarchy.</li>
<li>Season to distaste.</li>
</ol>
<p>SERVES: no one</p>
<h2>Composition Over Inheritance</h2>
<p>Last week, I took a suspiciously-growing class, Scope, and used subclassing to split it into a class hierarchy.  The goal was to start separating some of the concepts that had gotten all mixed up, and to better-communicate how each <em>kind</em> of Scope was to be used.  I ended that post with some vague criticism about disliking the use of &#8216;virtual&#8217;, &#8216;override&#8217;, and &#8216;base&#8217; keywords.  I felt that using subclassing was a useful tool to help separate responsibilities, but the result was more complex than necessary.</p>
<p>These keywords helped me to avoid copy/pasting code across all the subclasses, and allowed subclasses to customize that behavior where appropriate, so how bad could they be?  It all worked, and I didn&#8217;t have to reach for my copy/paste shortcuts.</p>
<p><a href="https://github.com/plioi/rook/blob/8155326c6c428cdd2bf63e9e4986796a8a20fac7/src/Rook.Compiling/Scope.cs">The code</a>&#8217;s a little hard to follow, though.  The base class contains some <code>virtual</code> methods with a default implementation.  That implementation is used by GlobalScope and TypeMemberScope because that happens to be the right thing to do for those subclasses.  LocalScope <code>override</code>s them, deliberately using the <code>base</code> implementation in <em>one</em> of those <code>override</code>s and deliberately <em>avoids</em> the <code>base</code> implementation in another.  Why?  To find out, you have to run the code in your head, and in order to do that you have to start looking around at all the implementations of all the methods in the hierarchy.  </p>
<blockquote><p>With virtual/override/base, you have to understand <em>everything</em> to understand <em>anything</em>.</p></blockquote>
<p>These three keywords combine to produce the same kind of <a href="http://en.wikipedia.org/wiki/Spaghetti_code">spaghetti code</a> as a <code>goto</code> does.  The compiler knows what you mean, but the reader doesn&#8217;t!</p>
<p>When possible, I prefer to favor composition over inheritance.  We still want to avoid copy/pasting logic around, but composing simple objects together is another way to accomplish that goal, and the results are easier to read.</p>
<h2>Applying Composition in the Scope Hierarchy</h2>
<blockquote><p>In previous weeks, we&#8217;ve improved upon incidental complexity by removing bad abstractions and splitting up abstractions that were getting too complex.  This time, we&#8217;ll improve upon incidental complexity by recognizing that one abstraction was hiding within another.</p></blockquote>
<p>The code I didn&#8217;t want to copy around appeared largely in the base class of <a href="https://github.com/plioi/rook/blob/8155326c6c428cdd2bf63e9e4986796a8a20fac7/src/Rook.Compiling/Scope.cs">the troubled implementation</a>.  I had a dictionary with a particular key type and value type, representing the types of the identifiers found in a given scope (&#8220;bindings&#8221; in compiler terms), and I wanted access to the dictionary to be strict about uniqueness of keys while not throwing exceptions (programmers mistakenly create duplicate identifiers all the time, so it&#8217;s not an exceptional occurrence).</p>
<p>This special kind of dictionary deserves to be a first class citizen of my compiler.  Let&#8217;s pull it out into its own class, separate from the class hierarchy but <em>used</em> by the class hierarchy to avoid duplicated logic.</p>
<p>I extracted the new abstraction, <code>BindingDictionary</code>, from <code>Scope</code>.  The abstract base class became empty, so I converted it to an interface:</p>
<p><div><script src='https://gist.github.com/3260425.js'></script>
<noscript><pre><code></code></pre></noscript></div>
</p>
<p>(On for-pay projects I follow the IFoo interface naming convention for consistency across the team.  I don&#8217;t on this project because&#8230; because&#8230; because I say so that&#8217;s why.)</p>
<p>Contrast <a href="https://github.com/plioi/rook/blob/8155326c6c428cdd2bf63e9e4986796a8a20fac7/src/Rook.Compiling/Scope.cs">the previous implementation</a> with <a href="https://github.com/plioi/rook/blob/59cb30404aba89cd8bc94a761e1194e79210afab/src/Rook.Compiling/Scope.cs">the new implementation</a>.  These classes make use of the new <code>BindingDictionary</code> abstraction in order to reuse that logic without inheritance and overrides.  To understand any class, you need only look at that one class.  You don&#8217;t have to run it <em>all</em> in your head to know what it&#8217;s actual behavior is going to be, because <strong>each class is satisfying the <code>Scope</code> contract on its own</strong>.  Also, I got to give more descriptive names to the member variables because the member variables are no longer shared across multiple classes with different meanings.</p>
<p>Subclassing isn&#8217;t all bad.  I find myself using the Template Method pattern, for instance.  In that case, though, I&#8217;m only overriding methods that are abstract in the base class.  When you start overriding non-abstract methods, though, you start lying to the reader:</p>
<blockquote><p>&#8220;This virtual method here does <em>this</em>, unless it doesn&#8217;t.  It probably doesn&#8217;t.&#8221;</p></blockquote>
<h2>Criticism and Next Steps</h2>
<p>Some of these classes actually got <em>bigger</em>, which can be a code smell, but in this case they are mostly one-liners, and in my mind I exclude one-liners when considering lines-of-code counts.  The world needs more one-liner methods.</p>
<p>Now that <code>Scope</code> is just an interface, it&#8217;s easier to take a quick glance at it and know that one of the methods on it is standing out like a sore thumb.  Scopes represent which identifiers are visible at some point in the code being compiled, along with their declared types; the <code>TryIncludeUniqueBinding, TryGet, and Contains</code> methods serve that abstraction.  The <code>IsGeneric</code> method doesn&#8217;t serve that concept, but lives in these classes in order to produce the right results.</p>
<p>Looks like we&#8217;ve got another poor abstraction here: a useful abstraction is missing completely, and needs to be added so that this &#8216;IsGeneric&#8217; decision, <em>whatever the heck that means</em>, can have a good home.  We&#8217;ll see what that&#8217;s all about in my next post.</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2012-08-04T00:00:00-05:00" pubdate data-updated="true">Aug 4<span>th</span>, 2012</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/developer-deep-dive/'>Developer Deep Dive</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/get-to-know-a-developer-andrew-west/">
		
			Get to Know a Developer: Andrew West</a>
	</h2>
	<div class="entry-content">
		<p><a href="http://www.headspring.com/wp-content/uploads/2012/08/andrew-west.png"><img class="alignright size-medium wp-image-5681" title="andrew west" src="http://www.headspring.com/wp-content/uploads/2012/08/andrew-west-300x300.png" alt="" width="300" height="300" /></a>This week&#8217;s developer actually started last week: Andrew West, Senior Consultant.  Andrew has been riding the contract train for all kinds of companies for about 10 years.  He&#8217;s done some server side work for mobile geo-caching apps, developed a bar code app for hazardous waste tracking in the healthcare industry, worked on projects in the financial and academic worlds, and more.  Now, he&#8217;s happy to give Headspring and our clients his full attention, telling me that he intentionally steered away from other offers because he knew he wanted to work here.  Here&#8217;s more of our conversation:</p>
<p><strong>Are you an expert at anything?</strong></p>
<p>I have a lot of experience with C#, ASP.NET MVC, and relational databases, but the learning process never ends.  I’m always looking for ways to improve my skills.</p>
<p><strong>Who is on your list of ideal clients to work for or individuals to work with?</strong></p>
<p>I’m fascinated by the space industry, so it would be interesting to work with clients in that field.  I’m amazed by things like the Mars Science Laboratory mission.</p>
<p><strong>What led you to software development?</strong></p>
<p>When I was 9 or 10 years old my parents gave me a toy computer.  It only had 2 kilobytes of RAM and a 16-character display, but I managed to create simple games with it.  Eventually I learned to program the Apple II, TRS-80, and IBM PC.  By the time I was in high school, I knew I wanted a career in software.</p>
<p><strong>What did you learn first?</strong></p>
<p>I started out learning various dialects of BASIC.  A few years later I learned C++ and x86 assembly language.</p>
<p><strong>Do you like teaching?</strong></p>
<p>Teaching a room full of people can be intimidating, but it’s still a great experience if you don’t worry too much about being perfect.  I learn a lot when I’m preparing to teach.</p>
<p><strong>Where do you begin when learning something new?</strong></p>
<p>I still like to read books in hard copy format.  Reading a technical book from cover to cover gives me a broader understanding of a new technology than reading online code examples or documentation.</p>
<p>&nbsp;</p>
<p>I agree, Andy. Hard copy books for life!  To learn more, tweet: <a href="https://twitter.com/andrewtwest">@andrewtwest</a></p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2012-08-02T00:00:00-05:00" pubdate data-updated="true">Aug 2<span>nd</span>, 2012</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/blog/'>Blog</a>, <a class='category' href='/blog/categories/bonus/'>Bonus!</a>, <a class='category' href='/blog/categories/developer-deep-dive/'>Developer Deep Dive</a>, <a class='category' href='/blog/categories/get-to-know-a-headspringer/'>Get To Know a Headspringer</a>, <a class='category' href='/blog/categories/what-the-tech/'>What the tech?</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/headspring-chosen-as-exclusive-education-partner-in-north-america-by-ravendb/">
		
			Headspring Chosen as Exclusive Education Partner in North America by RavenDB</a>
	</h2>
	<div class="entry-content">
		<p style="text-align: center;"><strong><em><a href="http://www.headspring.com/wp-content/uploads/2012/07/logo-ravendb.png"><img class="alignright size-medium wp-image-5670" title="RavenDB" src="http://www.headspring.com/wp-content/uploads/2012/07/logo-ravendb-300x104.png" alt="RavenDB" width="300" height="104" /></a>First Public Course Scheduled for September at Headspring Headquarters in Austin, Texas</em></strong></p>
<p>&nbsp;</p>
<p>Austin, TX – July 30, 2012, Headspring, a custom application development and consulting firm, today announced it was selected as the exclusive training partner for RavenDB, a popular open-source document database.</p>
<p>The premiere RavenDB training course provided by Headspring is scheduled for September 5-6, 2012 with limited space available. The course will be instructed by Principal Consultant Alonso Robles, with curriculum developed by RavenDB creator and CEO of Hibernating Rhinos, Oren Eini.</p>
<p>Headspring is a leading educator in the development community and was chosen as the exclusive partner to RavenDB because of its proven experience implementing document database in custom software projects.</p>
<p>&#8220;We are excited to be working with Headspring in a move that will make it easier and more accessible for customers to adopt RavenDB, and for developers and sys ops to learn just how useful a tool they now have within reach&#8221; says Eini.</p>
<p>The partnership also signifies Headspring’s ongoing commitment to the adaptation and evangelism of open-source technology.</p>
<p>“We’ve had a lot of success using RavenDB for our clients,” said Kevin Hurwitz, Chief Architect at Headspring. &#8220;We’re excited about this opportunity and looking forward to educating the new adopters of this great product.”</p>
<p>To register or learn more about the course, visit: <a href="http://www.headspring.com/events/ravendb-boot-camp/">http://www.headspring.com/events/ravendb-boot-camp/</a></p>
<p><strong>About RavenDB</strong></p>
<p>RavenDB is an open source (with a commercial option) second generation document database for the .NET/Windows platform, developed by Hibernating Rhinos, which also developed a set of profilers for Object Relations Mappers for the .NET and Java platforms.</p>
<p>RavenDB is used by customers for running low end embedded solutionssuch as Point Of Sale systems all the way up to highly scalable, distributed &amp; replicated, systems such as MSNBC.COM, which has moved several keys assets to RavenDB, and plans to move more in the future.</p>
<p>For more information about RavenDB, visit <a href="http://ravendb.net" target="_blank">http://ravendb.net</a></p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2012-07-30T00:00:00-05:00" pubdate data-updated="true">Jul 30<span>th</span>, 2012</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/press/'>Press</a>


</div>
	
</div>
</article>

<nav id="pagenavi">
    
        <a href="/blog/page/9/" class="prev">Prev</a>
    
    
        <a href="/blog/page/11/" class="next">Next</a>
    
    <div class="center"><a href="/blog/archives">Blog Archives</a></div>
</nav></div>
	<footer id="footer" class="inner">Copyright &copy; 2013

    Headspring Labs

</footer>
	<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->






</body>
</html>