
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>Headspring Labs</title>
	<meta name="author" content="Headspring Labs">

	
	<meta name="description" content="Yak Shaving is a term used to describe one of two situations: when you&#8217;re performing some seemingly-wasteful activity that ultimately helps &hellip;">
	
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="/atom.xml" rel="alternate" title="Headspring Labs" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script async="true" src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	
</head>


<body>
	<header id="header" class="inner"><h1><a href="/">Headspring Labs</a></h1>
<nav id="mobile-nav">
	<div class="alignleft menu">
		<a class="button">Menu</a>
		<div class="container"><ul class="main">
	<li><a href="/">Blog</a></li>
	<li><a href="/blog/archives">Archives</a></li>
	<li><a href="/open-source">Open Source</a></li>
	<li><a href="/team">The Team</a></li>
	<li><a href="/about-us">About Us</a></li>
</ul>
</div>
	</div>
	<div class="alignright search">
		<a class="button"></a>
		<div class="container">
			<form action="http://google.com/search" method="get">
				<input type="text" name="q" results="0">
				<input type="hidden" name="q" value="site:headspringlabs.com">
			</form>
		</div>
	</div>
</nav>
<nav id="sub-nav" class="alignright">
	<div class="social">
		
		
		
		<a class="twitter" href="http://twitter.com/HeadspringLabs" title="Twitter">Twitter</a>
		
		
		<a class="github" href="https://github.com/HeadspringLabs" title="GitHub">GitHub</a>
		
	    
		
		<a class="coderwall" href="https://coderwall.com/team/headspring" title="Coderwall">Coderwall</a>
		
		
		
		
		
		<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
	    
	</div>
	<form class="search" action="http://google.com/search" method="get">
		<input class="alignright" type="text" name="q" results="0">
		<input type="hidden" name="q" value="site:headspringlabs.com">
	</form>
</nav>
<nav id="main-nav"><ul class="main">
	<li><a href="/">Blog</a></li>
	<li><a href="/blog/archives">Archives</a></li>
	<li><a href="/open-source">Open Source</a></li>
	<li><a href="/team">The Team</a></li>
	<li><a href="/about-us">About Us</a></li>
</ul>
</nav>

</header>
	
		
	
	<div id="content" class="inner">


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/meta-yak-shaving/">
		
			Meta-Yak Shaving</a>
	</h2>
	<div class="entry-content">
		<p><a href="http://joi.ito.com/weblog/2005/03/05/yak-shaving.html">Yak Shaving</a> is a term used to describe one of two situations: when you&#8217;re performing some seemingly-wasteful activity that ultimately helps you reach your actual goal, or when you fixate on a mostly-wasteful activity while procrastinating about your actual goal.</p>
<p>With software, this usually presents itself as spending <em>way</em> too much time refactoring without making meaningful forward progress.  Don&#8217;t get me wrong - refactoring should be a daily activity to ensure that you don&#8217;t get overwhelmed by mounting complexity, but when you&#8217;re refactoring perfectly-fine code again and again because it&#8217;s kinda fun to do so, you&#8217;re yak shaving.</p>
<p>On a project for which time and money are valuable to the interested parties, yak shaving is unacceptable.  However, I think that developers should feel free to do this on a side project for the sake of <em>practice</em>.  If I violently overthink a refactoring effort on a project that affects nobody else, then when I encounter a similar problem on a for-pay project I won&#8217;t <em>need</em> to waste time coming to the same conclusion.  &#8220;When I had infinite time and zero dollars on the line, I solved this problem like so.  So let&#8217;s just do that this time right away!&#8221;</p>
<h2>Code Metrics</h2>
<p>I place relatively little value on code metrics, especially when they are used to drive decisions.  For instance, if you&#8217;re deciding what to do with your day <em>purely</em> by inspecting a code coverage report, you are staring directly into the business end of an inverted horse cart.  Instead, good testing habits will give you high coverage anyway.  Better yet, high code coverage born from good habits will be <strong>meaningfully</strong>-high; it&#8217;s easy to make changes that <em>trick</em> a metric into looking better than it is, giving you a false sense of security.</p>
<p>The little value I do place on metrics comes when I want to take an occasional snapshot of a project, in case it can point out some useful patterns or trouble areas.  I did this for my <a href="https://github.com/plioi/parsley">yak shaving project</a> and found some interesting things about my own coding style.</p>
<h2>Lines of Code</h2>
<p>LOC counts are largely useless as a code metric, but comparing lines of library code versus lines of test code is interesting: Parsley has 585 lines of library code, and <em>847</em> of test code.  I was expecting a 50/50 split.  This project lends itself to having a lot of unit tests: it doesn&#8217;t go out-of-process for anything, and has no UI.  Still, this ratio is pretty darn high.  I&#8217;m glad I&#8217;ve put in the effort, though, for an unusually-high test/library ratio, as the problem being solved involves a great deal of potential edge cases and, more importantly, the problem being solved is nearly impossible to step through with a debugger.</p>
<p>Lesson learned: unit testing can help to mitigate the risks of using a hard-to-step-through design.</p>
<h2>Depth of Inheritance</h2>
<p>Most of the inheritance in this project is interface-based.  The largest example of implementation-inheritance is only 3 levels deep, and <a href="https://github.com/plioi/parsley/blob/2d113754b6e3e68a43e624987fb7ed5c4dd99870/src/Parsley/TokenKind.cs">the classes involved</a> have a very narrow focus.  This is an example of the Template Method pattern.  There&#8217;s the &#8216;real&#8217; class and then a few convenience subclasses that fill in a tiny bit of the work.</p>
<p>Lesson learned: with infinite yak shaving time, I avoid most implementation-inheritance.</p>
<h2>Conditional Logic</h2>
<p>Another surprise: the &#8216;else&#8217; keyword appears only 4 times in those 1432 lines.  Weird.  I certainly don&#8217;t consciously think of &#8216;else&#8217; as somehow <em>bad</em>.  The explanation comes in seeing how else conditional logic presents itself.</p>
<p>First, polymorphism hides some conditional logic, as it implies statements like &#8220;if the runtime type of x is T1 then call T1&#8217;s implementation, <strong>else</strong> if the runtime type of x is T2 then call T2&#8217;s implementation, <strong>else</strong>â€¦&#8221;</p>
<p>Second, I find that I have several methods that take on the following form:</p>
<p><div><script src='https://gist.github.com/3066889.js'></script>
<noscript><pre><code></code></pre></noscript></div>
</p>
<p>In every way that matters, there&#8217;s an &#8216;else&#8217; in that code block.  It&#8217;s just implied.  I think my accidental aversion to &#8216;else&#8217; is really a consequence of two other things:</p>
<ol>
<li>My class methods are very short and make few decisions. They have cyclomatic complexity around 1.6, meaning each method makes about 1 decision before returning, giving little reason to require nested if statements.  Also, my methods tend to be very short, averaging 3 lines.  Most of my if statements therefore take the form &#8220;if (condition) return A; else return B;&#8221; in which &#8216;else&#8217; is superfluous.</li>
<li>ReSharper suggests removing &#8216;else&#8217; whenever it is superfluous.</li>
</ol>
<p>Lessons learned: with infinite yak shaving time, I a) perform extract-method refactorings until my methods are extremely short, with each method making about 1 decision; b) use interface-inheritance and Template Method to simplify the most complex logic; and c) discard as many characters as I can get away with, such as when ReSharper suggets removing &#8216;else&#8217;.</p>
<h2>Mutation</h2>
<p>This one isn&#8217;t a lesson learned because it&#8217;s always on my mind already, but when given infinite yak shaving time I avoid mutable state like the plague.  Most of my class fields are declared as readonly, and most of my auto-properties are declared as <code>{ get; private set;}</code> and only get set within the constructor, making them effectively readonly too.  Most of my local variables are given a value when they are declared and then never get overwritten.</p>
<p>I found about 10 mutable variables in this whole project, and they were all local to a method, so the state change wouldn&#8217;t have any affect on the complexity of the rest of the library.  My aversion to mutation leads me to write code in the functional-style for the most part, but when that <em>inevitably</em> gets awkward during an intensively bit-twiddling method, I know it&#8217;s time to escape into statements-and-mutation-mode.</p>
<p>The only interesting bit of mutation comes in the <a href="https://github.com/plioi/parsley/blob/2d113754b6e3e68a43e624987fb7ed5c4dd99870/src/Parsley/TokenStream.cs">TokenStream</a> class, which repeatedly mutates a <a href="http://www.headspring.com/blog/developer-deep-dive/public-private-super-private/">super-private</a> IEnumerator by calling its <code>MoveNext()</code> method.  Amusingly, this admittedly-complex class exists precisely so that you can traverse an IEnumerable in an apparently-mutation-free way.  My worst offender in the fight against mutable state exists in order to cover up some mutable state!</p>
<h2>Conclusion</h2>
<p>With infinite time and no budget, I write code in a particular style.  It drifts over the years as I gain experience, but certain trends are already apparent, and this experience influences my work on for-pay projects.  I recommend setting aside one project-of-no-consequence for a similar effort, so that you can also discover your own trends.  <strong>What do you find yourself doing, when you have the opportunity to write something that is truly to your liking?</strong></p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2012-07-07T00:00:00-05:00" pubdate data-updated="true">Jul 7<span>th</span>, 2012</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/developer-deep-dive/'>Developer Deep Dive</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/saying-goodbye-to-spicewood-springs-road/">
		
			Saying Goodbye to Spicewood Springs Road</a>
	</h2>
	<div class="entry-content">
		<p>We&#8217;re moving offices tomorrow, which means today is packing day. Â Although we&#8217;ll miss the awesome view, we&#8217;re looking forward to spreading out in our (giant) new home on Jollyville and Braker in the Avallon building. Â Keep in touch, Dovetail folks!</p>
<p>I&#8217;ll be sure to post pictures of the new place once we move in.<br />
<object width="400" height="300" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0"><param name="flashvars" value="offsite=true&amp;lang=en-us&amp;page_show_url=%2Fphotos%2Fheadspring%2Fsets%2F72157630451128500%2Fshow%2F&amp;page_show_back_url=%2Fphotos%2Fheadspring%2Fsets%2F72157630451128500%2F&amp;set_id=72157630451128500&amp;jump_to=" /><param name="allowFullScreen" value="true" /><param name="src" value="http://www.flickr.com/apps/slideshow/show.swf?v=109615" /><param name="allowfullscreen" value="true" /><embed width="400" height="300" type="application/x-shockwave-flash" src="http://www.flickr.com/apps/slideshow/show.swf?v=109615" flashvars="offsite=true&amp;lang=en-us&amp;page_show_url=%2Fphotos%2Fheadspring%2Fsets%2F72157630451128500%2Fshow%2F&amp;page_show_back_url=%2Fphotos%2Fheadspring%2Fsets%2F72157630451128500%2F&amp;set_id=72157630451128500&amp;jump_to=" allowFullScreen="true" allowfullscreen="true" /></object></p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2012-07-06T00:00:00-05:00" pubdate data-updated="true">Jul 6<span>th</span>, 2012</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/blog/'>Blog</a>, <a class='category' href='/blog/categories/bonus/'>Bonus!</a>, <a class='category' href='/blog/categories/small-talk-and-big-news/'>Small Talk &amp; Big News</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/get-to-know-a-developer-michael-nero/">
		
			Get to Know a Developer: Michael Nero</a>
	</h2>
	<div class="entry-content">
		<p><img class="alignright size-medium wp-image-5648" title="Michael Nero" src="http://www.headspring.com/wp-content/uploads/2012/06/photo-224x300.jpg" alt="Michael Nero" width="224" height="300" />This week, we welcomed a new Senior Consultant, Michael Nero.Â  Heâ€™s a multiple time resident of Austin, most recently moving back about a year ago for a consulting position at ProAce. Â Before that, it was a year-long stint working on a Foreign Exchange product called Velocity at Infusion Development in New York Cityâ€¦.</p>
<p>â€¦New York City?! (Now, commence Pace Picante commercial re-enactment)â€¦</p>
<p>And before all that, several years of bouncing between Beaumont and Austin for various school and work opportunities.</p>
<p>Anyway, we had a great time talking about living in New York, dirty subways, and you know, some work stuff. Hereâ€™s the rest:</p>
<p><strong>Are you an expert at anything?</strong></p>
<p>Iâ€™m a good C# developer, and I know quite a lot about the .NET Framework, most specifically threading.Â  Iâ€™ll stop short of calling myself an expert at anything though, just so I donâ€™t preclude the possibility that I may learn something new.</p>
<p><strong>Who is on your list of ideal clients to work for or individuals to work with?</strong></p>
<p>Iâ€™m unreservedly dedicated to clients I can help the most and whoâ€™s work benefits someone other than themselves.</p>
<p><strong>What led you to software development?</strong></p>
<p>It was by accident, really.Â  When I was younger, I really wanted to be a Microsoft Technical Support Representative, which I thought was the highest echelon of achievement â€“ weâ€™re all young once.Â  Having thwarted my motherâ€™s attempts to make me a C++ programmer when I was freshman in high school (my version of teenage rebellion), I finally gave in to her ever present delicate pressure to pursue an Electrical Engineering degree at university.Â  Part of the curriculum for an EE major was a few CS classes, and in my first CS class, I learned that hey, I was pretty good at writing code.Â  So, I stuck with it.</p>
<p><strong>What did you learn first?</strong></p>
<p>My universityâ€™s curriculum taught Managed C++ for the first year, then we moved to Java for the second year, then we were free to use whatever language we liked best after that.</p>
<p><strong>Do you like teaching?</strong></p>
<p>I like it when people get excited, and people are always excited about learning something new.</p>
<p><strong>What does your team rely on you for?</strong></p>
<p>My positive and no-challenge-is-too-great attitude, I hope.Â  My teams have always been brimming with super smart people, and alone, thereâ€™s nothing to stop any one of them.Â  But together, we can create something truly beautiful.Â  So, I guess Iâ€™m a good cheerleader.</p>
<p>&nbsp;</p>
<p>For more info on Michael, contact him on twitter: <a href="https://twitter.com/neroware" target="_blank">@neroware</a></p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2012-06-29T00:00:00-05:00" pubdate data-updated="true">Jun 29<span>th</span>, 2012</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/bonus/'>Bonus!</a>, <a class='category' href='/blog/categories/developer-deep-dive/'>Developer Deep Dive</a>, <a class='category' href='/blog/categories/get-to-know-a-headspringer/'>Get To Know a Headspringer</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/bowling-night/">
		
			Bowling Night</a>
	</h2>
	<div class="entry-content">
		<p>Summer is here and the livin&#8217; is&#8230;hot! Â And busy! Â New projects, family vacations, conferences (and sleep) have kept our plates so full that I almost forgot to update the blog! Never fear; pictures are here.</p>
<p>Recently, we were selected for the highly coveted 4<a href="http://www.headspring.com/news/headspring-named-one-of-top-5-best-places-to-work-in-austin/" target="_blank">th place ranking</a> on the ABJ&#8217;s Best Places to Work in Central Texas list. Â In celebration, the team managed to wrangle their families together for bowling night at the Main Event. Â Our company bowling team, the Headspring Hurwitzes, attempted to show off their skills, but they were no match for the kids. Those of us that knew better than to compete, delighted in the endless supply of nachos. We had a blast!</p>
<p>Check out the photos:</p>
<p><object width="600" height="400" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0"><param name="src" value="https://picasaweb.google.com/s/c/bin/slideshow.swf" /><param name="flashvars" value="host=picasaweb.google.com&amp;hl=en_US&amp;feat=flashalbum&amp;RGB=0x000000&amp;feed=https%3A%2F%2Fpicasaweb.google.com%2Fdata%2Ffeed%2Fapi%2Fuser%2F116995917277898038900%2Falbumid%2F5756332069269080945%3Falt%3Drss%26kind%3Dphoto%26hl%3Den_US" /><param name="pluginspage" value="http://www.macromedia.com/go/getflashplayer" /><embed width="600" height="400" type="application/x-shockwave-flash" src="https://picasaweb.google.com/s/c/bin/slideshow.swf" flashvars="host=picasaweb.google.com&amp;hl=en_US&amp;feat=flashalbum&amp;RGB=0x000000&amp;feed=https%3A%2F%2Fpicasaweb.google.com%2Fdata%2Ffeed%2Fapi%2Fuser%2F116995917277898038900%2Falbumid%2F5756332069269080945%3Falt%3Drss%26kind%3Dphoto%26hl%3Den_US" pluginspage="http://www.macromedia.com/go/getflashplayer" /></object></p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2012-06-27T00:00:00-05:00" pubdate data-updated="true">Jun 27<span>th</span>, 2012</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/bonus/'>Bonus!</a>, <a class='category' href='/blog/categories/small-talk-and-big-news/'>Small Talk &amp; Big News</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/anonymous-function-arguments/">
		
			Anonymous Function Arguments</a>
	</h2>
	<div class="entry-content">
		<p>A lambda expression is also called an &#8220;anonymous function&#8221; as it has no official name of its own: <code>x => x + 1</code> does some work, but there&#8217;s no declared name for that function.  Anonymous functions are powerful and expressive, and are now common in .NET projects.</p>
<p>Anonymous function <em>arguments</em>, on the other hand, are weak and inexpressive.  Since the advent of the <code>Func</code> and <code>Action</code> delegate types, anonymous arguments have unfortuanately become as common as anonymous functions.  That is a trend I&#8217;d like to quash ASAP.</p>
<h2>Sneaky Ambiguity</h2>
<p>What do I mean by &#8220;anonymous function arguments&#8221;?  Let&#8217;s say someone else has written a method that takes in a <code>Func</code> and then invokes it as part of its own work:</p>
<p><div><script src='https://gist.github.com/2992221.js'></script>
<noscript><pre><code></code></pre></noscript></div>
</p>
<p>Let&#8217;s say you really need to reticulate some splines, and you have a general idea of what function you should be passing into the <code>ReticulateSplines</code> method, but you don&#8217;t happen to really know what the int and bool arguments are supposed to signify.  You confidently put your keyboard to work and get as far as the open-parenthesis in but a few keystrokes:</p>
<p><div><script src='https://gist.github.com/2992224.js'></script>
<noscript><pre><code></code></pre></noscript></div>
</p>
<p>Alas, your stalled and blinking cursor finds your youthful confidence quaint but ultimately futile.  Visual Studio isn&#8217;t going to be of any use here.  The most you&#8217;ll find out from Intellisense is that you need to supply some function that takes in an int and a bool.  <code>Func</code>&#8217;s declared argument names are <em>arg1</em> and <em>arg2</em>.  These names are so useless that they might as well not exist.  Hence, &#8220;anonymous&#8221; function arguments.</p>
<p><code>ReticulateSplines</code> has a descriptive name for its <em>own</em> argument (<code>generateSplines</code>), but has provided no clue as to what the arguments to this <code>Func</code> are.  If I started writing methods with parameters named <em>arg1</em>, <em>arg2</em>, <em>arg3</em>â€¦ I&#8217;d be immediately despised by every other developer who had to use my code.  Why, then, should I be able to get away with expecting those same developers to make sense of delegate arguments that have equally-ambiguous names?</p>
<h2>Getting Specific</h2>
<p>The <code>delegate</code> keyword gets used less and less now that <code>Func</code> and <code>Action</code> are used for everything.  It&#8217;s time to dust it off and put it to work again.  When faced with the problem of anonymous function arguments, and you can resolve the problem with a simple delegate declaration.</p>
<p>I recently needed to call a method that accepted an <code>Action&lt;Action, Action&gt;</code>.  I had a rough idea of what such an action needed to accomplish, but even after reading the body of the method in question I was unsure of the details.  The two anonymous arguments (the two inner actions) were passed around a bit before they were actually used.  Thankfully, someone had successfully called this method before, and after looking at the concrete method declaration that was being used in that case, I had a real clue what <em>arg1</em> and <em>arg2</em> were supposed to be called.</p>
<p>The fix was to introduce a more useful yet equivalent delegate type.</p>
<p><div><script src='https://gist.github.com/2995736.js'></script>
<noscript><pre><code></code></pre></noscript></div>
</p>
<p>Now, I could replace all usages of <code>Action&lt;Action, Action&gt;</code> with <code>SavePromptContinuation</code>.  Back in my own code, Intellisense started offering the help I needed, and more importantly started offering the help that the next developer would inevitably need.  When trying to call a method that accepts one of these, ReSharper even offers to write the method stub for the specific delegate expected, complete with well-named parameters!</p>
<p><code>Func</code> and <code>Action</code> are useful because they are <em>at hand</em>, but the other edge of that sword may just cut your fellow developers.  Here&#8217;s some advice for their use:</p>
<p>1. Use <code>Func</code> and <code>Action</code> when writing something that is inherently so abstract that you can&#8217;t be more specific.<br />
2. You are not writing something that abstract.</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2012-06-27T00:00:00-05:00" pubdate data-updated="true">Jun 27<span>th</span>, 2012</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/developer-deep-dive/'>Developer Deep Dive</a>


</div>
	
</div>
</article>

<nav id="pagenavi">
    
        <a href="/blog/page/21/" class="prev">Prev</a>
    
    
        <a href="/blog/page/23/" class="next">Next</a>
    
    <div class="center"><a href="/blog/archives">Blog Archives</a></div>
</nav></div>
	<footer id="footer" class="inner">Copyright &copy; 2013

    Headspring Labs

</footer>
	<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->






</body>
</html>