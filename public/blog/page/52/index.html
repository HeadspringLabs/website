
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>Headspring Labs</title>
	<meta name="author" content="Headspring Labs">

	
	<meta name="description" content="Traditional relational database schemas are designed to keep computers happy. Indexes, foreign keys, joins&#8230;all of these tools allow for the &hellip;">
	
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="/atom.xml" rel="alternate" title="Headspring Labs" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script async="true" src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	
</head>


<body>
	<header id="header" class="inner"><h1><a href="/">Headspring Labs</a></h1>
<nav id="mobile-nav">
	<div class="alignleft menu">
		<a class="button">Menu</a>
		<div class="container"><ul class="main">
	<li><a href="/">Blog</a></li>
	<li><a href="/blog/archives">Archives</a></li>
	<li><a href="/open-source">Open Source</a></li>
	<li><a href="/team">The Team</a></li>
	<li><a href="/about-us">About Us</a></li>
</ul>
</div>
	</div>
	<div class="alignright search">
		<a class="button"></a>
		<div class="container">
			<form action="http://google.com/search" method="get">
				<input type="text" name="q" results="0">
				<input type="hidden" name="q" value="site:headspringlabs.com">
			</form>
		</div>
	</div>
</nav>
<nav id="sub-nav" class="alignright">
	<div class="social">
		
		
		
		<a class="twitter" href="http://twitter.com/HeadspringLabs" title="Twitter">Twitter</a>
		
		
		<a class="github" href="https://github.com/HeadspringLabs" title="GitHub">GitHub</a>
		
	    
		
		<a class="coderwall" href="https://coderwall.com/team/headspring" title="Coderwall">Coderwall</a>
		
		
		
		
		
		<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
	    
	</div>
	<form class="search" action="http://google.com/search" method="get">
		<input class="alignright" type="text" name="q" results="0">
		<input type="hidden" name="q" value="site:headspringlabs.com">
	</form>
</nav>
<nav id="main-nav"><ul class="main">
	<li><a href="/">Blog</a></li>
	<li><a href="/blog/archives">Archives</a></li>
	<li><a href="/open-source">Open Source</a></li>
	<li><a href="/team">The Team</a></li>
	<li><a href="/about-us">About Us</a></li>
</ul>
</nav>

</header>
	
		
	
	<div id="content" class="inner">


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/crafting-an-extensible-reporting-schema/">
		
			Crafting an Extensible Reporting Schema</a>
	</h2>
	<div class="entry-content">
		<p>Traditional relational database schemas are designed to keep computers happy. Indexes, foreign keys, joins&#8230;all of these tools allow for the highest level of optimization so data can be recorded and read back in record time. However, humans are typically very <em>un</em>happy when it comes time to answer business questions from this data.</p>
<p>Imagine your boss approaches you and asks for a report of all orders placed by the Acme Corporation on Thursdays. You recall how many times you and your team optimized the database containing this information so data could be written at break-neck speeds and moan when you think of the complex script you&#8217;ll need to write to retrieve the report your boss requires. Wouldn&#8217;t it be nice if, instead of lines and lines of arcane SQL, we could ask a database something like the following and get back exactly what we expect?</p>
<pre>&lt;code&gt; select * from Orders where Customer = &#39;Acme&#39; and DayOfWeek = &#39;Thursday&#39;&lt;/code&gt;</pre>
<p>No joins, no convoluted date parsing&#8230;in fact, this SQL statement is almost identical to the sentence your boss used, isn&#8217;t it? How do we get to this level of utopian question-answering? The key is in the concept of &#8220;complex writes and simple reads&#8221;: instead of saving data to a database only in some crazy &#8220;normal form&#8221; fashion, flatten out your data so you can more easily query against it. Let&#8217;s take a look at a simple date&#8230;say, my birthday this year: 13 December 2011 2:18 PM.</p>
<p>Normally, we&#8217;d stick this value into a column designed for holding dates&#8230;and that&#8217;s fine, assuming the only question we&#8217;ll ever want to ask is &#8220;show me something that occurred on 13 December 2011 at 2:18 PM&#8221;. Unfortunately, that sort of question almost never gets asked. Instead, it&#8217;s queries like &#8220;on Tuesdays&#8221; or &#8220;in the afternoon&#8221;. To answer these questions, our schema needs to be modified a bit. The original &#8220;date-only&#8221; schema might look something like this:</p>
<pre>&lt;code&gt; OrderDate : datetime&lt;/code&gt;</pre>
<p>After we flatten out the date and time, our schema might look something like this:</p>
<pre>&lt;code&gt; Day : int Month : nvarchar Year : int DayOfWeek : nvarchar Hour : int Minute : int PM : bit&lt;/code&gt;</pre>
<p>Given this schema, we can now ask a multitude of questions about the single record represented, such as:</p>
<ul style="margin-bottom: 1.0em;">
<li>How many orders were placed in January?
<pre>&lt;code&gt; select count(1) from Orders where Month = &#39;January&#39;&lt;/code&gt;</pre>
</li>
<li>What orders did Acme place on Friday afternoons?
<pre>&lt;code&gt; select * from Orders where DayOfWeek = &#39;Friday&#39; and PM = &#39;1&#39;&lt;/code&gt;</pre>
</li>
</ul>
<p>Getting data into this type of schema is actually surprisingly easy; in fact, each of these values can be extracted from a single .NET DateTime object:</p>
<pre>&lt;code&gt; var timsBirthday = DateTime.Parse(&quot;13 December 2011 2:18 PM&quot;); var day = timsBirthday.Day; var month = timsBirthday.ToString(&quot;MMMM&quot;); var year = timsBirthday.Year; var dayOfWeek = timsBirthday.DayOfWeek; var hour = timsBirthday.Hour; var minute = timsBirthday.Minute; var pm = timsBirthday.Hour &amp;gt;= 12;&lt;/code&gt;</pre>
<p>It&#8217;s not just dates that can be flattened out in this manner! For a hypothetical generic Customer object, for example, you can extrapolate (and answer business questions on!) properties like these:</p>
<ul style="margin-bottom: 1.0em;">
<li>Name</li>
<li>Primary Contact</li>
<li>Phone</li>
<li>City</li>
<li>State</li>
<li>ZIP Code</li>
</ul>
<p>Happy reporting!</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2011-09-28T00:00:00-05:00" pubdate data-updated="true">Sep 28<span>th</span>, 2011</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/developer-deep-dive/'>Developer Deep Dive</a>, <a class='category' href='/blog/categories/business-intelligence/'>business intelligence</a>, <a class='category' href='/blog/categories/reporting-schema/'>reporting schema</a>, <a class='category' href='/blog/categories/sql/'>sql</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/what-can-we-learn-from-calvin-hobbes/">
		
			What Can We Learn From Calvin & Hobbes?</a>
	</h2>
	<div class="entry-content">
		<p>A lot of people call me up when they need custom software to solve a problem. While each project is a little bit different, they typically fall within a few categories of maintainable software solutions. I’ve learned a valuable lesson about categories though: Sometimes you have to throw them out the window to clearly understand a problem…</p>
<p>Growing up I read a lot of Calvin and Hobbes. I’ve got every anthology including the leather-bound edition. As much as I love reading them, I find myself having to refocus halfway through a single strip. I tend to think that I know the ending to a given strip or series, and I skip ahead.</p>
<p>Oh, this is the one where he collects all the UPCs and gets a propeller beanie. I’m going to flip a few pages and see the look on his face when he doesn’t take off!</p>
<p>I always thought I had read every single Calvin and Hobbes. There was nothing about that kid and his tiger that I didn’t know.</p>
<p>A couple years ago, I was going back through my old collections and I found that I definitely hadn’t read every strip. In fact, I found that I had skipped most of the large Sunday illustrations because over the years I was skipping pages, thinking oh, I’ve read all of these storylines before.</p>
<p>It turns out those Sunday illustrations were the best. They were the ones that had cool stuff like T-Rex’s riding in fighter jets! (Spoiler alert for the shockingly Randy Quaid-less ending of Cowboys vs. Aliens).</p>
<p>I find that this same pattern shows up if I’m talking with a client who has a familiar problem. I have to focus myself on what they’re telling me so I don’t jump ahead in my mind to what I think the solution is. If I do that, I’ll miss out on all of the really important stuff they’re sharing- things that I wouldn’t have thought could be a part of the problem or answer. I want the Sunday edition of their story, I don’t want to hear the first panel and flip to my ending.</p>
<p>If a company is looking to become more agile, if they’re looking for an object-oriented development approach, or if they want us to modernize their legacy system, I have to put away my jump-to-conclusions mat- I might surprise myself and discover something I wouldn’t have found otherwise.</p>
<p>&nbsp;</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2011-09-27T00:00:00-05:00" pubdate data-updated="true">Sep 27<span>th</span>, 2011</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/small-talk-and-big-news/'>Small Talk &amp; Big News</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/headspring-sponsoring-open-source-hackathon/">
		
			Headspring Sponsoring Open Source Hackathon</a>
	</h2>
	<div class="entry-content">
		<p>In conjunction with <a href="http://lostechies.github.com/fiesta/">Pablo’s Fiesta</a>, an open-space development conference being held in Austin September 30-October 2, Headspring will be sponsoring an Open Source Hackathon at our offices on Sunday October 2nd from 1 PM to 6 PM. Over 150 developers from all over the United States and beyond are coming to Austin for 3 days of ‘sharpening the saw’, and the Los Techies Crew realized that with all that brainpower in one place, we ought to be able to do some concentrated work on the open source tools we all use so much.</p>
<p>If you’re attending the Fiesta, or even if you aren’t, feel free to come by the Headspring offices on Sunday to learn more about how open source software is written, ask questions about tools you’re using or would like to use, or even kick-start a new open-source project! Please bring a laptop if you can!</p>
<p>Get more details by going to the <a href="http://groups.google.com/group/pablos-fiesta-hackathon?hl=en_US">Google Group for Pablo’s Fiesta Hackathon</a>.</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2011-09-26T00:00:00-05:00" pubdate data-updated="true">Sep 26<span>th</span>, 2011</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/small-talk-and-big-news/'>Small Talk &amp; Big News</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/using-jquery-in-asp-net-with-intellisense/">
		
			Using jQuery in ASP.NET With IntelliSense Correctly</a>
	</h2>
	<div class="entry-content">
		<p>When I&#8217;m teaching the MVC boot camp, I&#8217;m always amazed at how some of the smallest things are most impressive to students. One of the most common &#8220;wow&#8221; moments I see from students not familiar with jQuery is how you can trick Visual Studio to provide IntelliSense by including the vsdoc file, but make sure it still uses the min file for performance. That can be done by including the vsdoc file in an if(false) condition like below. This ensures it will never get included in the production code, which still tricking visual studio&#8217;s tooling to import the IntelliSense.</p>
<p style="text-align: center"><img class="aligncenter size-full wp-image-1871" src="http://www.headspring.com/wp-content/uploads/2011/09/jQuery-IntelliSense2.png" alt="" width="432" height="158" /></p>
<p>&nbsp;</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2011-09-23T00:00:00-05:00" pubdate data-updated="true">Sep 23<span>rd</span>, 2011</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/developer-deep-dive/'>Developer Deep Dive</a>, <a class='category' href='/blog/categories/visual-studio/'>Visual Studio</a>, <a class='category' href='/blog/categories/jquery/'>jQuery</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/the-compilers-treatment-of-linq-syntax/">
		
			The Compiler&#8217;s Treatment of LINQ Syntax</a>
	</h2>
	<div class="entry-content">
		<p>When LINQ first became available, it was described as having a &#8220;lazy evaluation model&#8221;, meaning that a query would not actually be executed until you started to look at the result. Iterating through a result, for instance, would finally cause the query to actually run. This gives you the power to piece together a query over multiple statements before letting it execute.</p>
<p>Recently, I found that <em>this abstraction can leak</em>. I had a set of queries that were misbehaving, and it seemed that a bug would be reproducible in one set of queries but not in another, even though they were remarkably similar to each other in structure. The culprit was a big surprise: it turns out that <strong>the first &#8216;from&#8217; clause in a query is treated differently from subsequent &#8216;from&#8217; clauses</strong>. Although my project&#8217;s &#8216;from&#8217; clauses were not implemented with side effects, an example that does use side effects best illustrates what is going on. Consider the following:</p>
<p><div><script src='https://gist.github.com/1203504.js'></script>
<noscript><pre><code></code></pre></noscript></div>
</p>
<p>If we trusted the explanations of LINQ queries as having a lazy evaluation model, we would expect the output to be:</p>
<pre>Before Loop
First Clause Side Effect
Second Clause Side Effect
Third Clause Side Effect
3</pre>
<p>We expect this because we&#8217;re told that the query doesn&#8217;t start doing any work until we start iterating throught the results. Surprisingly, the actual output is:</p>
<pre>First Clause Side Effect
Before Loop
Second Clause Side Effect
Third Clause Side Effect
3</pre>
<p>Yikes. <strong>The SQL-like query syntax is an abstraction over plain old method calls, and that abstraction is leaking.</strong> To make sense of what is going on, it is helpful to know what the compiler does every time it encounters query syntax. Before the compiler even bothers to determine whether your query is actually valid, it performs a plain text transformation to a series of specially-nested method calls. Only after that plain text transformation will it actually determine whether the methods being called exist, that the arguments passed to them are of the right type, etc. ReSharper can actually perform that transformation for you. When we do that to the query above, we get the following:</p>
<p><div><script src='https://gist.github.com/1203437.js'></script>
<noscript><pre><code></code></pre></noscript></div>
</p>
<p>A query with multiple &#8216;from&#8217; clauses is transformed into a series of nested method calls. Lambda expressions are used to introduce a new local scope for the identifiers x, y, and z. SelectMany is an extension method, so the specific implementation is irrelevant during the plain text transformation. In other words, you can define the query syntax yourself, based on the type of the object you are selecting from (in this case, we&#8217;re using the default IEnumerable&lt;T&gt; implementation of SelectMany).</p>
<p><strong>The right hand side of the first from clause is evaluated immediately. Subsequent from clauses are evaluated lazily, because only they appear on the right hand side of a lambda operator =&gt;.</strong></p>
<p>By better-understanding what the compiler is actually doing with our LINQ queries, we can avoid frustrating surprises when the abstraction starts leaking.</p>
<p>If you found this blog to be helpful <a href="http://www.headspring.com/feed" target="_blank">subscribe to our blog feed</a> for the freshest content.</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2011-09-08T00:00:00-05:00" pubdate data-updated="true">Sep 8<span>th</span>, 2011</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/developer-deep-dive/'>Developer Deep Dive</a>


</div>
	
</div>
</article>

<nav id="pagenavi">
    
        <a href="/blog/page/51/" class="prev">Prev</a>
    
    
        <a href="/blog/page/53/" class="next">Next</a>
    
    <div class="center"><a href="/blog/archives">Blog Archives</a></div>
</nav></div>
	<footer id="footer" class="inner">Copyright &copy; 2013

    Headspring Labs

</footer>
	<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->






</body>
</html>