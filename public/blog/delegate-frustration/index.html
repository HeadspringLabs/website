
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>Delegate Frustration - Headspring Labs</title>
	<meta name="author" content="Headspring Labs">

	
	<meta name="description" content="One of the things I like about C#&#8217;s delegate types, compared to similar concepts in other languages, is that C#&#8217;s take on the concept &hellip;">
	
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="/atom.xml" rel="alternate" title="Headspring Labs" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script async="true" src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.1.6/d3.min.js"></script>
	
</head>


<body>
	<header id="header" class="inner"><a href="/"><h1>Headspring Labs</h1></a>
<nav id="mobile-nav">
	<div class="alignleft menu">
		<a class="button">Menu</a>
		<div class="container"><ul class="main">
	<li><a href="/team">The Team</a></li>
	<li><a href="/blog/archives">Archives</a></li>
	<li><a href="/open-source">Open Source</a></li>
	<li><a href="/about-us">About Us</a></li>
</ul>
</div>
	</div>
	<div class="alignright search">
		<a class="button"></a>
		<div class="container">
			<form action="http://google.com/search" method="get">
				<input type="text" name="q" results="0">
				<input type="hidden" name="q" value="site:headspringlabs.com">
			</form>
		</div>
	</div>
</nav>
<nav id="sub-nav" class="alignright">
	<div class="social">
		
		
		
		<a class="twitter" href="http://twitter.com/HeadspringLabs" title="Twitter">Twitter</a>
		
		
		<a class="github" href="https://github.com/HeadspringLabs" title="GitHub">GitHub</a>
		
	    
		
		<a class="coderwall" href="https://coderwall.com/team/headspring" title="Coderwall">Coderwall</a>
		
		
		
		
		
		<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
	    
	</div>
	<form class="search" action="http://google.com/search" method="get">
		<input class="alignright" type="text" name="q" results="0">
		<input type="hidden" name="q" value="site:headspringlabs.com">
	</form>
</nav>
<nav id="main-nav"><ul class="main">
	<li><a href="/team">The Team</a></li>
	<li><a href="/blog/archives">Archives</a></li>
	<li><a href="/open-source">Open Source</a></li>
	<li><a href="/about-us">About Us</a></li>
</ul>
</nav>

</header>
	
		
	
	<div id="content" class="inner"><article class="post">
	<h2 class="title">Delegate Frustration</h2>
	<div class="entry-content"><p>One of the things I like about C#&#8217;s delegate types, compared to similar concepts in other languages, is that C#&#8217;s take on the concept lets you give a useful <em>name</em> to a family of functions:</p>
<p><div><script src='https://gist.github.com/2582885.js'></script>
<noscript><pre><code></code></pre></noscript></div>
</p>
<p>With this definition, all functions that turn one thing into another thing are Converters.  Nice.</p>
<p>We also have some generically-named <code>Action&lt;…&gt;</code> and <code>Func&lt;…&gt;</code> delegate types defined for us, and these have become ubiquitous ever since LINQ was introduced.  They&#8217;re not as communicative, but still extremely useful, and for the most part the naming stays out of the way.</p>
<p>Delegate types allow you to give a name to a family of functions.  However, you can run into trouble when you use two different names to refer to the <em>same</em> family of functions:</p>
<p><div><script src='https://gist.github.com/2582784.js'></script>
<noscript><pre><code></code></pre></noscript></div>
</p>
<p>Since all methods are compatable with any delegate type that has matching input/output types, why aren&#8217;t the following queries equivalent?</p>
<p><div><script src='https://gist.github.com/2582790.js'></script>
<noscript><pre><code></code></pre></noscript></div>
</p>
<p>This was a little frustrating when C# 3 came out.  Before then, all the delegate types we were used to working with had explicit names like <code>Converter</code> and <code>Predicate</code>.  When C# 3 introduced lambdas and LINQ, we gained <code>Func&lt;…&gt;</code> and <code>Action&lt;…&gt;</code>, and I found myself stumbling while converting older code to use the new LINQ extension methods like <code>Select</code>, which takes a <code>Func&lt;T, TResult&gt;</code>.</p>
<p>It&#8217;s extra-frustrating because <em>every single Converter&lt;T, TResult> method that ever lived is also a Func&lt;T, TResult>!</em> I know it, you know it, Grandma tweeted it.  We can drive that point home by making the <code>convert</code> delegate work with <code>Select</code> by wrapping it in a trivial do-nothing lambda: <code>integers.Select(x =&gt; convert(x));</code>  Yeesh!</p>
<p>To help make sense of this behavior, we can make an analogy between delegates and interfaces.</p>
<p>Think of a delegate <em>type</em> as a special kind of interface type.  The interface has only one method, called &#8220;Call&#8221;.  Since it is <em>always</em> called &#8220;Call&#8221;, you can shorten the reader-unfriendly <code>convert.Call(5)</code> to simply <code>convert(5)</code>.</p>
<p>Think of a method as an <em>instance</em> of these interfaces.  All methods implement the infinite number of possible delegate &#8216;interfaces&#8217; that match their input and output types.  <code>Stringify</code> is an object that implements the imaginary <code>IConverter&lt;int, string&gt;</code> interface, and also implements the imaginary <code>IFunc&lt;int, string&gt;</code> interface.  Both of these interfaces just happen to contain the imaginary method with the signature: <code>string Call(int x)</code>.</p>
<p>Now, the example above makes more sense.  We have two variables declared as &#8216;interface&#8217; types, and assign the same object to both variables.  <code>Select</code> is written to accept instances of one &#8216;interface&#8217; type, and although <code>convert</code> points at a method compatable with <code>Select</code>, <code>convert</code> itself can only be seen as having some other, incompatible type.</p>
</div>


<div class="meta">
	<div class="date">








  


<time datetime="2012-05-04T00:00:00-05:00" pubdate data-updated="true">May 4<span>th</span>, 2012</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/developer-deep-dive/'>Developer Deep Dive</a>


</div>
	
</div>
</article>

	<div class="share">
	<div class="addthis_toolbox addthis_default_style ">
		
		<a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
		
		
		<a class="addthis_button_tweet"></a>
		
		
		
	</div>
	
</div>


</div>
	<footer id="footer" class="inner"><div class="related-links">
	<h3>Other Headspring Sites</h3>
	<ul>
		
		
			<li><a href="http://www.headspring.com">Headspring</a></li>
		
		
			<li><a href="http://www.headspringmobile.com">Headspring Mobile</a></li>
		
	</ul>
</div>

<div class="related-links">
	<h3>Communities/Groups</h3>
	<ul>
		
		
			<li><a href="http://www.adnug.org">ADNUG</a></li>
		
		
			<li><a href="http://polyglotprogrammers.org/">Polyglot Programmers</a></li>
		
	</ul>
</div>

<div class="related-links">
	<h3>Open Source</h3>
	<ul>
		
		
			
				
				<li><a href="http://automapper.org">AutoMapper</a></li>
				
			
		
		
			
				
				<li><a href="https://github.com/HeadspringLabs/Enumeration">Enumeration</a></li>
				
			
		
		
			
				
				<li><a href="http://chrismissal.com/Formo">Formo</a></li>
				
			
		
		
			
				
				<li><a href="http://plioi.github.io/fixie">Fixie</a></li>
				
			
		
		
			
		
		
			
		
		
			
		
	</ul>
</div>

<div class="related-links">
	<h3>Events</h3>
	<ul>
		
		
			<li><a href="http://ctxgivecamp.org/">Central Texas GiveCamp</a></li>
		
		
			<li><a href="http://www.houstontechfest.org/">Houston Tech Fest</a></li>
		
		
			<li><a href="http://codecamp13.adnug.org/">Austin Code Camp</a></li>
		
	</ul>
</div>

<hr />

Copyright &copy; 2013

    Headspring Labs

</footer>
	<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->






</body>
</html>