
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>Ain't Any Is All Ain't - Headspring Labs</title>
	<meta name="author" content="Headspring Labs">

	
	<meta name="description" content="Today, ReSharper made the same suspicious suggestion to both my coworker and me. We both had the task of checking a potentially-large collection for &hellip;">
	
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="/atom.xml" rel="alternate" title="Headspring Labs" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script async="true" src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	
</head>


<body>
	<header id="header" class="inner"><a href="/"><h1>Headspring Labs</h1></a>
<nav id="mobile-nav">
	<div class="alignleft menu">
		<a class="button">Menu</a>
		<div class="container"><ul class="main">
	<li><a href="/team">The Team</a></li>
	<li><a href="/blog/archives">Archives</a></li>
	<li><a href="/open-source">Open Source</a></li>
	<li><a href="/about-us">About Us</a></li>
</ul>
</div>
	</div>
	<div class="alignright search">
		<a class="button"></a>
		<div class="container">
			<form action="http://google.com/search" method="get">
				<input type="text" name="q" results="0">
				<input type="hidden" name="q" value="site:headspringlabs.com">
			</form>
		</div>
	</div>
</nav>
<nav id="sub-nav" class="alignright">
	<div class="social">
		
		
		
		<a class="twitter" href="http://twitter.com/HeadspringLabs" title="Twitter">Twitter</a>
		
		
		<a class="github" href="https://github.com/HeadspringLabs" title="GitHub">GitHub</a>
		
	    
		
		<a class="coderwall" href="https://coderwall.com/team/headspring" title="Coderwall">Coderwall</a>
		
		
		
		
		
		<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
	    
	</div>
	<form class="search" action="http://google.com/search" method="get">
		<input class="alignright" type="text" name="q" results="0">
		<input type="hidden" name="q" value="site:headspringlabs.com">
	</form>
</nav>
<nav id="main-nav"><ul class="main">
	<li><a href="/team">The Team</a></li>
	<li><a href="/blog/archives">Archives</a></li>
	<li><a href="/open-source">Open Source</a></li>
	<li><a href="/about-us">About Us</a></li>
</ul>
</nav>

</header>
	
		
<div id="banner" class="inner">
	<div class="container">
		<ul class="feed"></ul>
	</div>
	<small><a href="http://twitter.com/HeadspringLabs">HeadspringLabs</a> @ <a href="http://twitter.com">Twitter</a></small>
	<div class="loading">Loading...</div>
</div>
<script src="/javascripts/twitter.js"></script>
<script type="text/javascript">
	(function($){
		$('#banner').getTwitterFeed('HeadspringLabs', 5, );
	})(jQuery);
</script>

	
	<div id="content" class="inner"><article class="post">
	<h2 class="title">Ain't Any Is All Ain't</h2>
	<div class="entry-content"><p>Today, ReSharper made the same suspicious suggestion to both my coworker and me.  We both had the task of checking a potentially-large collection for items that fail to pass a test, and we both phrased these like so: &#8220;if not any of the items fail, continue…&#8221;.  In each case, ReSharper wanted to rephrase our statements, and it seemed like following the suggestion would be a change for the worse! </p>
<h2>An Offensive Suggestion</h2>
<p>Here&#8217;s what each of our situations boiled down to:</p>
<p><div><script src='https://gist.github.com/3903096.js'></script>
<noscript><pre><code></code></pre></noscript></div>
</p>
<p>We leaned on the Any() extension method, with the intention of &#8220;short circuiting&#8221; the underlying loop.  Any() starts at the front of the list, and tests each item until one of them passes the condition in the lambda expression.  Once we hit that item, there is no need to continue processing items, so Any() returns early.  This is similar to the way that the || operator works: in the expression (a() || b() || c()), we only bother to call method c() when a() and b() are both false.</p>
<p>So, it seems the ReSharper suggestion is only <em>technically</em> the same.  You&#8217;ll get the same answer, but surely testing &#8220;All&#8221; the items is potentially wasteful in the event that the collection is large.</p>
<p>What a terrible suggestion!  So terrible, I wanted to write an angry letter to the editor of my local newspaper: &#8220;…these nogoodniks, these ne&#8217;er-do-wells over at <a href="http://www.jetbrains.com/resharper/">JetBrains</a> need to <strong>turn that racket down and get off my lawn!</strong>&#8221;</p>
<p>I&#8217;m glad I didn&#8217;t, though, because I was completely wrong.</p>
<h2>Oops</h2>
<p>While searching for a code sample demonstrating this ReSharper suggestion, I found the truth: <a href="http://stackoverflow.com/questions/9027530/linq-not-any-vs-all-dont">Not Any vs All Don&#8217;t</a>.</p>
<p>The top answer reveals the actual implementation of both Any() and All().  Naturally, <em>both</em> Any() and All() are implemented with the &#8220;short circuit&#8221; logic mentioned above.  Any() behaves like (a() || b() || c()), <strong>and All() behaves like (a() && b() && c())</strong>.  Both have the opportunity to stop looking at items as soon as they have enough information to have the correct final answer.</p>
<p>My mistake was to read too much into the use of the word &#8220;All&#8221; without actually thinking about how it could be best implemented.  Yet again, ReSharper has proven itself to be clearly smarter than me.</p>
</div>


<div class="meta">
	<div class="date">








  


<time datetime="2012-10-17T00:00:00-05:00" pubdate data-updated="true">Oct 17<span>th</span>, 2012</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/developer-deep-dive/'>Developer Deep Dive</a>


</div>
	
</div>
</article>

	<div class="share">
	<div class="addthis_toolbox addthis_default_style ">
		
		<a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
		
		
		<a class="addthis_button_tweet"></a>
		
		
		
	</div>
	
</div>


</div>
	<footer id="footer" class="inner">Copyright &copy; 2013

    Headspring Labs

</footer>
	<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->






</body>
</html>