
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>NuGet Package Restore - Headspring Labs</title>
	<meta name="author" content="Headspring Labs">

	
	<meta name="description" content="Text is easy.
Source control tools slice and dice text all day. It&#8217;s easy to compare, easy to merge, and easy to compress. Even in a busy &hellip;">
	
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="/atom.xml" rel="alternate" title="Headspring Labs" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script async="true" src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	
</head>


<body>
	<header id="header" class="inner"><a href="/"><h1>Headspring Labs</h1></a>
<nav id="mobile-nav">
	<div class="alignleft menu">
		<a class="button">Menu</a>
		<div class="container"><ul class="main">
	<li><a href="/team">The Team</a></li>
	<li><a href="/blog/archives">Archives</a></li>
	<li><a href="/open-source">Open Source</a></li>
	<li><a href="/about-us">About Us</a></li>
</ul>
</div>
	</div>
	<div class="alignright search">
		<a class="button"></a>
		<div class="container">
			<form action="http://google.com/search" method="get">
				<input type="text" name="q" results="0">
				<input type="hidden" name="q" value="site:headspringlabs.com">
			</form>
		</div>
	</div>
</nav>
<nav id="sub-nav" class="alignright">
	<div class="social">
		
		
		
		<a class="twitter" href="http://twitter.com/HeadspringLabs" title="Twitter">Twitter</a>
		
		
		<a class="github" href="https://github.com/HeadspringLabs" title="GitHub">GitHub</a>
		
	    
		
		<a class="coderwall" href="https://coderwall.com/team/headspring" title="Coderwall">Coderwall</a>
		
		
		
		
		
		<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
	    
	</div>
	<form class="search" action="http://google.com/search" method="get">
		<input class="alignright" type="text" name="q" results="0">
		<input type="hidden" name="q" value="site:headspringlabs.com">
	</form>
</nav>
<nav id="main-nav"><ul class="main">
	<li><a href="/team">The Team</a></li>
	<li><a href="/blog/archives">Archives</a></li>
	<li><a href="/open-source">Open Source</a></li>
	<li><a href="/about-us">About Us</a></li>
</ul>
</nav>

</header>
	
		
<div id="banner" class="inner">
	<div class="container">
		<ul class="feed"></ul>
	</div>
	<small><a href="http://twitter.com/HeadspringLabs">HeadspringLabs</a> @ <a href="http://twitter.com">Twitter</a></small>
	<div class="loading">Loading...</div>
</div>
<script src="/javascripts/twitter.js"></script>
<script type="text/javascript">
	(function($){
		$('#banner').getTwitterFeed('HeadspringLabs', 5, );
	})(jQuery);
</script>

	
	<div id="content" class="inner"><article class="post">
	<h2 class="title">NuGet Package Restore</h2>
	<div class="entry-content"><p>Text is easy.</p>
<p>Source control tools slice and dice text all day.  It&#8217;s easy to compare, easy to merge, and easy to compress.  Even in a busy project, large portions of your code don&#8217;t really change all that often.  Git, for instance, can pretend to store every commit as a point-in-time copy of your whole source tree by <a href="http://progit.org/book/ch1-3.html">sharing large unchanged blobs</a> of text with other commits.</p>
<p>Text is easy.  Binary is tough.</p>
<h2>Do you pass the &#8220;New Hire Day 1&#8221; test?</h2>
<p>We often store binaries in our source control tools, and with good reason.  We want to make it easy to spin up a new development environment.  When you hire a new developer, they should be able to pull down your project from source control <em>and just go</em>.  Dependencies such as libraries, build tools, and the like should be versioned with the project.</p>
<p>The alternative experience can be painful.  You show up for your first day at a new job, pull down the project, and try to run itâ€¦ <strong>THUD</strong>.  It won&#8217;t even build.  You try to install the right third-party libraries and tools after diagnosing each build error, and hopefully you&#8217;re using the same version as everyone else.  Maybe the Dependency Gods smile upon you, and you&#8217;ll be up and running before the end of the day.</p>
<p>It&#8217;s easy to avoid these problems by including your dependencies, both libraries and tools, in source control, but can we do better?</p>
<h2>Binary is Tough</h2>
<p>You can store binaries in source control, but binaries are tough.  Even small changes in functionality can result in dramatically different file contents, so it&#8217;s impractical to diff/merge them.  Changes in a binary file over time have to be stored without the sneaky compression tricks used for text files.</p>
<p>NuGet makes it easy to install libraries into your projects, but this means dumping a whole lot of DLLs into source control.  <strong>Your repo might start to grow impractically large.</strong></p>
<h2>Package Restore</h2>
<p>Fortunately, though, we can have the best of both worlds.  We can provide our team with a reliable and easy way to set up new development environments, and benefit from NuGet&#8217;s version/dependency smarts, without having to actually store NuGet package binaries in source control.</p>
<p>First, <a href="http://docs.nuget.org/docs/start-here/installing-nuget">install NuGet</a> if you haven&#8217;t already.</p>
<p>Next, go to Solution Explorer, right click on the Solution itself, and select &#8220;Enable Nuget Package Restore&#8221;.  This adds some files to a special .nuget folder, and adjusts the projects of your solution to use that folder at build time.</p>
<p>Lastly, note that NuGet has been placing downloaded packages under a <code>packages/</code> folder near your *.sln.  You can wipe this out.  When using git, I also add this folder to my <code>.gitignore</code> so that its contents no longer get saved to the repository.</p>
<p>Read that last step again.  <strong>We deliberately deleted away all the versioned packages that NuGet has been maintaining for us!</strong></p>
<p>When enabling Package Restore in your solution, you changed the way that your solution builds.  When you try to build again, NuGet will notice that your projects reference specific packages that are no longer found under <code>packages/</code>.  Fortunately, your solution still contains <code>packages.config</code> files which list dependencies along with their version numbers.  Armed with these config files, NuGet will pull down the missing files into <code>packages/</code> for you right before your project gets compiled.  Upon the next build, it will just use the files already in <code>packages/</code>.</p>
</div>


<div class="meta">
	<div class="date">








  


<time datetime="2012-04-13T00:00:00-05:00" pubdate data-updated="true">Apr 13<span>th</span>, 2012</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/developer-deep-dive/'>Developer Deep Dive</a>


</div>
	
</div>
</article>

	<div class="share">
	<div class="addthis_toolbox addthis_default_style ">
		
		<a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
		
		
		<a class="addthis_button_tweet"></a>
		
		
		
	</div>
	
</div>


</div>
	<footer id="footer" class="inner"><div class="related-links">
	<h3>Other Headspring Sites</h3>
	<ul>
		
		
			<li><a href="http://www.headspring.com">Headspring</a></li>
		
		
			<li><a href="http://www.headspringmobile.com">Headspring Mobile</a></li>
		
	</ul>
</div>

<div class="related-links">
	<h3>Communities/Groups</h3>
	<ul>
		
		
			<li><a href="http://www.adnug.org">ADNUG</a></li>
		
		
			<li><a href="http://polyglotprogrammers.org/">Polyglot Programmers</a></li>
		
	</ul>
</div>

<div class="related-links">
	<h3>Open Source</h3>
	<ul>
		
		
			
				
				<li><a href="http://automapper.org">AutoMapper</a></li>
				
			
		
		
			
				
				<li><a href="https://github.com/HeadspringLabs/Enumeration">Enumeration</a></li>
				
			
		
		
			
				
				<li><a href="http://chrismissal.com/Formo">Formo</a></li>
				
			
		
		
			
				
				<li><a href="http://plioi.github.io/fixie">Fixie</a></li>
				
			
		
		
			
		
		
			
		
		
			
		
	</ul>
</div>

<div class="related-links">
	<h3>Events</h3>
	<ul>
		
		
			<li><a href="http://ctxgivecamp.org/">Central Texas GiveCamp</a></li>
		
		
			<li><a href="http://www.houstontechfest.org/">Houston Tech Fest</a></li>
		
		
			<li><a href="http://codecamp13.adnug.org/">Austin Code Camp</a></li>
		
	</ul>
</div>

<hr />

Copyright &copy; 2013

    Headspring Labs

</footer>
	<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->






</body>
</html>