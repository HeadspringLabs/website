
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>Architecture Resists Change - Headspring Labs</title>
	<meta name="author" content="Headspring Labs">

	
	<meta name="description" content="In a conversation about large software projects, the word &#8220;architecture&#8221; is bound to come up sooner or later. Most programmers have a gut &hellip;">
	
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="/atom.xml" rel="alternate" title="Headspring Labs" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script async="true" src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	
</head>


<body>
	<header id="header" class="inner"><a href="/"><h1>Headspring Labs</h1></a>
<nav id="mobile-nav">
	<div class="alignleft menu">
		<a class="button">Menu</a>
		<div class="container"><ul class="main">
	<li><a href="/team">The Team</a></li>
	<li><a href="/blog/archives">Archives</a></li>
	<li><a href="/open-source">Open Source</a></li>
	<li><a href="/about-us">About Us</a></li>
</ul>
</div>
	</div>
	<div class="alignright search">
		<a class="button"></a>
		<div class="container">
			<form action="http://google.com/search" method="get">
				<input type="text" name="q" results="0">
				<input type="hidden" name="q" value="site:headspringlabs.com">
			</form>
		</div>
	</div>
</nav>
<nav id="sub-nav" class="alignright">
	<div class="social">
		
		
		
		<a class="twitter" href="http://twitter.com/HeadspringLabs" title="Twitter">Twitter</a>
		
		
		<a class="github" href="https://github.com/HeadspringLabs" title="GitHub">GitHub</a>
		
	    
		
		<a class="coderwall" href="https://coderwall.com/team/headspring" title="Coderwall">Coderwall</a>
		
		
		
		
		
		<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
	    
	</div>
	<form class="search" action="http://google.com/search" method="get">
		<input class="alignright" type="text" name="q" results="0">
		<input type="hidden" name="q" value="site:headspringlabs.com">
	</form>
</nav>
<nav id="main-nav"><ul class="main">
	<li><a href="/team">The Team</a></li>
	<li><a href="/blog/archives">Archives</a></li>
	<li><a href="/open-source">Open Source</a></li>
	<li><a href="/about-us">About Us</a></li>
</ul>
</nav>

</header>
	
		
<div id="banner" class="inner">
	<div class="container">
		<ul class="feed"></ul>
	</div>
	<small><a href="http://twitter.com/HeadspringLabs">HeadspringLabs</a> @ <a href="http://twitter.com">Twitter</a></small>
	<div class="loading">Loading...</div>
</div>
<script src="/javascripts/twitter.js"></script>
<script type="text/javascript">
	(function($){
		$('#banner').getTwitterFeed('HeadspringLabs', 5, );
	})(jQuery);
</script>

	
	<div id="content" class="inner"><article class="post">
	<h2 class="title">Architecture Resists Change</h2>
	<div class="entry-content"><p>In a conversation about large software projects, the word &#8220;architecture&#8221; is bound to come up sooner or later.  Most programmers have a gut feeling for what this really means with regard to software, but if you asked 10 programmers to define it, you&#8217;d get 10 different answers.</p>
<p>In <a href="http://martinfowler.com/ieeeSoftware/whoNeedsArchitect.pdf">Who Needs an Architect?</a>, Martin Fowler covers a few definitions which he ultimately boils down to one simple concept: <strong>architecture is the decisions that are hard to change.</strong></p>
<p>Depending on the tone you use when reading that definition, it&#8217;s almost a <em>pejorative</em>.  Joel Spolsky even warned us of <a href="http://www.joelonsoftware.com/articles/fog0000000018.html">Architecture Astronauts</a>, people who effectively over-engineer and abstract things to the point that they&#8217;re no longer solving real problems.</p>
<p>Yes, <strong>an</strong> architecture can be bad.  If the decisions that are hard to change form obstacles between you and the true goal of your project, you&#8217;ve got a bad architecture.  On the other hand, some decisions that are hard to change may be a driving force for your success.  It&#8217;s just important to be aware of which decisions form your architecture as you make them.</p>
<h2>Example: The Onion Architecture</h2>
<p>With the <a href="http://www.headspring.com/2012/03/onion-architecture-part-4-after-four-years">Onion Architecture</a>, the hard-to-change decision is to define realtively-unstable infrastructure on the outside, depending on a core application that is ignorant of infrastructure details like persistence.</p>
<p>This decision is hard to change, but it is justified.  As Jeffrey Palermo said during a presentation on the O.A., an assembly is only as stable as its least-stable dependency.  Therefore, for an application to stand the test of time, we need to maximize the stable portion and minimize our dependency on things that are too likely to change.  If your app integrates with Twitter today, it likely won&#8217;t in 5 years after Twitter goes the way of the blue Dodo bird, so you are better off defining your Twitter integration outside of the core assembly, dependent on the core assembly rather than the other way around.</p>
<h2>Example: Parsley</h2>
<p>A few months back I described a hobby project to illustrate <a href="http://www.headspring.com/2011/11/recognizing-covariance-issues-in-your-code">covariance issues</a>.  This project lets you parse text by describing what a valid input looks like (similar to regular expressions).  There were two key decisions that would be impossible to change without starting from scratch:</p>
<blockquote>
<p>First, the user would describe what a valid input looks like by gluing together tiny <a href="http://domaindrivendesign.org/node/127">side-effect-free</a> functions.<br />
  Second, I would use read-only data structures to represent progress through the input.</p>
</blockquote>
<p>These two decisions are made frequently when using functional languages, but not so much in C# projects.  Despite being unusual, I found these decisions to be extremely helpful for this kind of problem, regardless of the language used to implement it.</p>
<p>The samples contain a <a href="https://github.com/plioi/parsley/blob/0b0b1cdddab040c1513344f3b768a8c348bed138/src/Parsley.Test/IntegrationTests/Json/JsonGrammar.cs">JSON parser</a>, which amounts to describing what valid JSON looks like.  The bulk of the description is summed up in a few lines:</p>
<p><div><script src='https://gist.github.com/2495421.js'></script>
<noscript><pre><code></code></pre></noscript></div>
</p>
<p>Because of the two architectural decisions, all the details about tracking progress, success, and failure can be completely hidden.  The user can solve the task at hand by describing the task at hand, and the architectural decisions enable that ability.</p>
<h2>Making Your Own Decisions</h2>
<p>As you make a decision that affects your project&#8217;s structure, ask yourself, &#8220;Is this a part of our architecture?  Is it going to be hard to change later if we go forward with it?  If so, does it <em>earn the right</em> to be included anyway?&#8221;  If not, try to restructure it so that it <em>is</em> easy to change, or consider chucking it entirely.</p>
</div>


<div class="meta">
	<div class="date">








  


<time datetime="2012-04-27T00:00:00-05:00" pubdate data-updated="true">Apr 27<span>th</span>, 2012</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/developer-deep-dive/'>Developer Deep Dive</a>


</div>
	
</div>
</article>

	<div class="share">
	<div class="addthis_toolbox addthis_default_style ">
		
		<a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
		
		
		<a class="addthis_button_tweet"></a>
		
		
		
	</div>
	
</div>


</div>
	<footer id="footer" class="inner"><div class="related-links">
	<h3>Other Headspring Sites</h3>
	<ul>
		<li><a href="http://www.headspring.com">Headspring</a></li>
		<li><a href="http://www.headspringmobile.com">Headspring Mobile</a></li>
	</ul>
</div>

<div class="related-links">
	<h3>Communities/Groups</h3>
	<ul>
		<li><a href="http://www.adnug.org">ADNUG</a></li>
		<li><a href="http://polyglotprogrammers.org">Polyglot ATX</a></li>
	</ul>
</div>

<div class="related-links">
	<h3>Open Source</h3>
	<ul>
		<li><a href="http://www.adnug.org">AutoMapper</a></li>
		<li><a href="http://polyglotprogrammers.org">Formo</a></li>
		<li><a href="http://polyglotprogrammers.org">Parsely</a></li>
		<li><a href="http://polyglotprogrammers.org">NAAK</a></li>
	</ul>
</div>

<div class="related-links">
	<h3>Events</h3>
	<ul>
		<li><a href="http://www.adnug.org">CTX Givecamp</a></li>
		<li><a href="http://polyglotprogrammers.org">Houston TechFest</a></li>
		<li><a href="http://polyglotprogrammers.org">Austin Code Camp</a></li>
	</ul>
</div>

<hr />

Copyright &copy; 2013

    Headspring Labs

</footer>
	<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->






</body>
</html>